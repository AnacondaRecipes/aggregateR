{% set version = '2.0.3' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-junctions
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/junctions_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/junctions/junctions_{{ version }}.tar.gz
  sha256: 0cebacad9c8fff1f41fbadbfd0f29fa2f6794abbe4c8af9ab629ba962cb2a352

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: dplyr, ggplot2, knitr, magrittr, rmarkdown, testthat, tidyr
requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{ compiler('cxx') }}            # [not win]
    - {{ compiler('m2w64_cxx') }}      # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}make
    - {{ posix }}sed               # [win]
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-rcpp
    - r-rcppparallel >=5.0.0
    - r-nloptr
    - r-tibble

  run:
    - r-base
    - {{native}}gcc-libs         # [win]
    - r-rcpp
    - r-rcppparallel >=5.0.0
    - r-nloptr
    - r-tibble

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('junctions')"           # [not win]
    - "\"%R%\" -e \"library('junctions')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https//github.com/thijsjanzen/junctions
  license: GPL-2
  summary: Individual based simulations of hybridizing populations, where the accumulation of
    junctions is tracked. Furthermore, mathematical equations are provided to verify
    simulation outcomes. Both simulations and mathematical equations are based on Janzen
    (2018, <doi:10.1101/058107>) and Janzen (2020, <doi:10.1101/2020.09.10.292441>).
  license_family: GPL2
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-2'

extra:
  recipe-maintainers:
    - katietz

# The original CRAN metadata for this package was:

# Type: Package
# Package: junctions
# Title: The Breakdown of Genomic Ancestry Blocks in Hybrid Lineages
# Version: 2.0.3
# Authors@R: person(given = "Thijs", family = "Janzen", role = c("aut", "cre"), email = "thijsjanzen@gmail.com")
# Description: Individual based simulations of hybridizing populations, where the accumulation of junctions is tracked. Furthermore, mathematical equations are provided to verify simulation outcomes. Both simulations and mathematical equations are based on Janzen (2018, <doi:10.1101/058107>) and Janzen (2020, <doi:10.1101/2020.09.10.292441>).
# License: GPL (>= 2)
# URL: https//github.com/thijsjanzen/junctions
# BugReports: https://github.com/thijsjanzen/junctions/issues
# Depends: RcppParallel (>= 5.0.0)
# Imports: nloptr, Rcpp, tibble
# Suggests: dplyr, ggplot2, knitr, magrittr, rmarkdown, testthat, tidyr
# LinkingTo: nloptr, Rcpp, RcppParallel
# VignetteBuilder: knitr
# Encoding: UTF-8
# RoxygenNote: 7.1.2
# SystemRequirements: C++14
# NeedsCompilation: yes
# Packaged: 2022-02-24 11:58:23 UTC; thijsjanzen
# Author: Thijs Janzen [aut, cre]
# Maintainer: Thijs Janzen <thijsjanzen@gmail.com>
# Repository: CRAN
# Date/Publication: 2022-02-24 12:30:02 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
