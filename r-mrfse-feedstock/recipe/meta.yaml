{% set version = '0.4.1' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-mrfse
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/mrfse_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/mrfse/mrfse_{{ version }}.tar.gz
  sha256: eb13ab2d9d268693c2709dfadefd24effcd07e5e6257d12c8f6a934ffa9166ce

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{ compiler('cxx') }}            # [not win]
    - {{ compiler('m2w64_cxx') }}      # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}make
    - {{ posix }}sed               # [win]
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-rcpp
    - r-rfast
    - r-gtools

  run:
    - r-base
    - {{native}}gcc-libs         # [win]
    - r-rcpp
    - r-rfast
    - r-gtools

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('mrfse')"           # [not win]
    - "\"%R%\" -e \"library('mrfse')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://CRAN.R-project.org/package=mrfse
  license: GPL-3
  summary: Three algorithms for estimating a Markov random field structure.Two of them are an
    exact version and a simulated annealing version of a penalized maximum conditional
    likelihood method similar to the Bayesian Information Criterion. These algorithm
    are described in Frondana (2016) <doi:10.11606/T.45.2018.tde-02022018-151123>.The
    third one is a greedy algorithm, described in Bresler (2015) <doi:10.1145/2746539.2746631).
  license_family: GPL3
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-3'

# The original CRAN metadata for this package was:

# Package: mrfse
# Title: Markov Random Field Structure Estimator
# Version: 0.4.1
# Date: 2022-11-10
# Description: Three algorithms for estimating a Markov random field structure.Two of them are an exact version and a simulated annealing version of a penalized maximum conditional likelihood method similar to the Bayesian Information Criterion. These algorithm are described in Frondana (2016) <doi:10.11606/T.45.2018.tde-02022018-151123>.The third one is a greedy algorithm, described in Bresler (2015) <doi:10.1145/2746539.2746631).
# License: GPL (>= 3)
# Authors@R: c(person("Rodrigo Carvalho", role = c("aut", "cre"), email = "rodrigorsdc@gmail.com"), person("Florencia Leonardi", role = c("rev", "ths")))
# NeedsCompilation: yes
# LinkingTo: Rcpp
# Imports: Rcpp
# Depends: gtools, Rfast
# Packaged: 2022-11-10 21:46:57 UTC; root
# Author: Rodrigo Carvalho [aut, cre], Florencia Leonardi [rev, ths]
# Maintainer: Rodrigo Carvalho <rodrigorsdc@gmail.com>
# Repository: CRAN
# Date/Publication: 2022-11-16 14:40:15 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
