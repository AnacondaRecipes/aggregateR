{% set version = '2.1.1' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-poolfstat
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/poolfstat_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/poolfstat/poolfstat_{{ version }}.tar.gz
  sha256: 2302bde4f700dac3557c18085f275487555721f5e563f1cdc72ea3305559ab54

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{ compiler('cxx') }}            # [not win]
    - {{ compiler('m2w64_cxx') }}      # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}make
    - {{ posix }}sed               # [win]
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-diagrammer
    - r-matrix
    - r-rcpp >=1.0.5
    - r-rcppprogress
    - r-ryacas
    - r-ape
    - r-doparallel
    - r-foreach
    - r-nnls
    - r-progress
    - r-zoo

  run:
    - r-base
    - {{native}}gcc-libs         # [win]
    - r-diagrammer
    - r-matrix
    - r-rcpp >=1.0.5
    - r-rcppprogress
    - r-ryacas
    - r-ape
    - r-doparallel
    - r-foreach
    - r-nnls
    - r-progress
    - r-zoo

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('poolfstat')"           # [not win]
    - "\"%R%\" -e \"library('poolfstat')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://CRAN.R-project.org/package=poolfstat
  license: GPL-2
  summary: Functions for the computation of f- and D-statistics (estimation of 'Fst', Patterson's
    'F2', 'F3', 'F3*', 'F4' and D parameters) in population genomics studies from allele
    count or Pool-Seq read count data and for the fitting, building and visualization
    of admixture graphs. The package also includes several utilities to manipulate Pool-Seq
    data stored in standard format (e.g., such as 'vcf' files or 'rsync' files generated
    by the the 'PoPoolation' software) and perform conversion to alternative format
    (as used in the 'BayPass' and 'SelEstim' software). As of version 2.0, the package
    also includes utilities to manipulate standard allele count data (e.g., stored in
    'TreeMix', 'BayPass' or 'SelEstim' format).
  license_family: GPL2
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-2'

extra:
  recipe-maintainers:
    - katietz

# The original CRAN metadata for this package was:

# Package: poolfstat
# Maintainer: Mathieu Gautier <mathieu.gautier@inrae.fr>
# Author: Mathieu Gautier
# Version: 2.1.1
# License: GPL (>= 2)
# Title: Computing f-Statistics and Building Admixture Graphs Based on Allele Count or Pool-Seq Read Count Data
# Description: Functions for the computation of f- and D-statistics (estimation of 'Fst', Patterson's 'F2', 'F3', 'F3*', 'F4' and D parameters) in population genomics studies from allele count or Pool-Seq read count data and for the fitting, building and visualization of admixture graphs. The package also includes several utilities to manipulate Pool-Seq data stored in standard format (e.g., such as 'vcf' files or 'rsync' files generated by the the 'PoPoolation' software) and perform conversion to alternative format (as used in the 'BayPass' and 'SelEstim' software). As of version 2.0, the package also includes utilities to manipulate standard allele count data (e.g., stored in 'TreeMix', 'BayPass' or 'SelEstim' format).
# LinkingTo: Rcpp, RcppProgress
# Imports: Rcpp (>= 1.0.5), methods, utils, foreach, doParallel, parallel, DiagrammeR, ape, stats, zoo, Ryacas, Matrix,RcppProgress, progress, nnls
# Depends: R (>= 3.0)
# Encoding: UTF-8
# RoxygenNote: 7.1.1
# NeedsCompilation: yes
# Packaged: 2022-05-02 09:53:16 UTC; mathieu
# Repository: CRAN
# Date/Publication: 2022-05-02 16:10:02 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
