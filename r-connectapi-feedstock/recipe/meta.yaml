{% set version = '0.1.3.1' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-connectapi
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/connectapi_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/connectapi/connectapi_{{ version }}.tar.gz
  sha256: 9a346eb33a34b8e279af3d2b85f91180e23f808174b2b01030dc5ba048f2dd01

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip
  noarch: generic

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: crayon, flexdashboard, ggplot2, gridExtra, htmltools, knitr, lubridate, processx, rmarkdown, rprojroot, spelling, testthat, rsconnect, webshot2, covr, mockery, devtools
requirements:
  build:
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-r6
    - r-bit64
    - r-config
    - r-dplyr
    - r-fs
    - r-glue
    - r-httr
    - r-jsonlite
    - r-lifecycle
    - r-magrittr
    - r-progress
    - r-purrr
    - r-rlang >=0.4.2
    - r-tibble
    - r-uuid
    - r-vctrs >=0.3.0
    - r-yaml

  run:
    - r-base
    - r-r6
    - r-bit64
    - r-config
    - r-dplyr
    - r-fs
    - r-glue
    - r-httr
    - r-jsonlite
    - r-lifecycle
    - r-magrittr
    - r-progress
    - r-purrr
    - r-rlang >=0.4.2
    - r-tibble
    - r-uuid
    - r-vctrs >=0.3.0
    - r-yaml

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('connectapi')"           # [not win]
    - "\"%R%\" -e \"library('connectapi')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://github.com/rstudio/connectapi
  license: MIT
  summary: Provides a helpful 'R6' class and methods for interacting with the 'Posit Connect'
    Server API along with some meaningful utility functions for regular tasks. API documentation
    varies by 'Posit Connect' installation and version, but the latest documentation
    is also hosted publicly at <https://docs.posit.co/connect/api/>.
  license_family: MIT
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/MIT'
    - LICENSE

# The original CRAN metadata for this package was:

# Type: Package
# Package: connectapi
# Title: Utilities for Interacting with the 'Posit Connect' Server API
# Version: 0.1.3.1
# Authors@R: c(person(given = "Sean", family = "Lopp", role = c("aut")), person(given = "Cole", family = "Arendt", role = c("aut", "cre"), email = "cole@posit.co"), person(given = "Posit, PBC", role = c("cph", "fnd")))
# Description: Provides a helpful 'R6' class and methods for interacting with the 'Posit Connect' Server API along with some meaningful utility functions for regular tasks. API documentation varies by 'Posit Connect' installation and version, but the latest documentation is also hosted publicly at <https://docs.posit.co/connect/api/>.
# License: MIT + file LICENSE
# URL: https://github.com/rstudio/connectapi
# Imports: config, dplyr, fs, glue, httr, lifecycle, magrittr, progress, purrr, R6, rlang (>= 0.4.2), tibble, uuid, vctrs (>= 0.3.0), yaml, bit64, jsonlite
# Suggests: crayon, flexdashboard, ggplot2, gridExtra, htmltools, knitr, lubridate, processx, rmarkdown, rprojroot, spelling, testthat, rsconnect, webshot2, covr, mockery, devtools
# VignetteBuilder: knitr
# RdMacros: lifecycle
# Encoding: UTF-8
# Language: en-US
# RoxygenNote: 7.2.3
# NeedsCompilation: no
# Packaged: 2023-02-01 00:02:36 UTC; colearendt
# Author: Sean Lopp [aut], Cole Arendt [aut, cre], Posit, PBC [cph, fnd]
# Maintainer: Cole Arendt <cole@posit.co>
# Repository: CRAN
# Date/Publication: 2023-02-02 12:50:02 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
