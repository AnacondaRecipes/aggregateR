{% set version = '1.0.5' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-textrecipes
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/textrecipes_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/textrecipes/textrecipes_{{ version }}.tar.gz
  sha256: 3f94437db9146a379c300ca21318230840e0aab4a06b148d914ef4f7d1a38f9d

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: covr, data.table, dials (>= 1.2.0), hardhat, janitor, knitr, modeldata, rmarkdown, sentencepiece, spacyr, stopwords, stringi, testthat (>= 3.0.0), text2vec, textfeatures (>= 0.3.3), tokenizers.bpe, udpipe, wordpiece
requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{ compiler('cxx') }}            # [not win]
    - {{ compiler('m2w64_cxx') }}      # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}make
    - {{ posix }}sed               # [win]
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-matrix
    - r-snowballc
    - r-cpp11
    - r-dplyr
    - r-generics >=0.1.0
    - r-glue
    - r-lifecycle
    - r-magrittr
    - r-purrr
    - r-recipes >=1.0.7
    - r-rlang
    - r-tibble
    - r-tokenizers
    - r-vctrs

  run:
    - r-base
    - {{native}}gcc-libs         # [win]
    - r-matrix
    - r-snowballc
    - r-cpp11
    - r-dplyr
    - r-generics >=0.1.0
    - r-glue
    - r-lifecycle
    - r-magrittr
    - r-purrr
    - r-recipes >=1.0.7
    - r-rlang
    - r-tibble
    - r-tokenizers
    - r-vctrs

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('textrecipes')"           # [not win]
    - "\"%R%\" -e \"library('textrecipes')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://github.com/tidymodels/textrecipes, https://textrecipes.tidymodels.org/
  license: MIT
  summary: Converting text to numerical features requires specifically created procedures, which
    are implemented as steps according to the 'recipes' package. These steps allows
    for tokenization, filtering, counting (tf and tfidf) and feature hashing.
  license_family: MIT
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/MIT'
    - LICENSE

# The original CRAN metadata for this package was:

# Package: textrecipes
# Title: Extra 'Recipes' for Text Processing
# Version: 1.0.5
# Authors@R: c( person("Emil", "Hvitfeldt", , "emil.hvitfeldt@posit.co", role = c("aut", "cre"), comment = c(ORCID = "0000-0002-0679-1945")), person(given = "Posit Software, PBC", role = c("cph", "fnd")) )
# Description: Converting text to numerical features requires specifically created procedures, which are implemented as steps according to the 'recipes' package. These steps allows for tokenization, filtering, counting (tf and tfidf) and feature hashing.
# License: MIT + file LICENSE
# URL: https://github.com/tidymodels/textrecipes, https://textrecipes.tidymodels.org/
# BugReports: https://github.com/tidymodels/textrecipes/issues
# Depends: R (>= 3.6), recipes (>= 1.0.7)
# Imports: lifecycle, dplyr, generics (>= 0.1.0), magrittr, Matrix, purrr, rlang, SnowballC, tibble, tokenizers, vctrs, glue
# Suggests: covr, data.table, dials (>= 1.2.0), hardhat, janitor, knitr, modeldata, rmarkdown, sentencepiece, spacyr, stopwords, stringi, testthat (>= 3.0.0), text2vec, textfeatures (>= 0.3.3), tokenizers.bpe, udpipe, wordpiece
# LinkingTo: cpp11
# VignetteBuilder: knitr
# Config/Needs/website: tidyverse/tidytemplate, reticulate
# Config/testthat/edition: 3
# Encoding: UTF-8
# LazyData: true
# RoxygenNote: 7.2.3
# SystemRequirements: "GNU make"
# NeedsCompilation: yes
# Packaged: 2023-10-20 21:25:10 UTC; emilhvitfeldt
# Author: Emil Hvitfeldt [aut, cre] (<https://orcid.org/0000-0002-0679-1945>), Posit Software, PBC [cph, fnd]
# Maintainer: Emil Hvitfeldt <emil.hvitfeldt@posit.co>
# Repository: CRAN
# Date/Publication: 2023-10-20 21:40:05 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
