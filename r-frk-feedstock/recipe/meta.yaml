{% set version = '2.2.0' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-frk
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/FRK_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/FRK/FRK_{{ version }}.tar.gz
  sha256: a5e448fb685ec598c235bc04434ff0b7b5a7f5422d134d17985a614858ae9acb

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: covr, dggrids, gstat, INLA, knitr, mapproj, parallel, sf, spdep, splancs, testthat, verification
requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{ compiler('cxx') }}            # [not win]
    - {{ compiler('m2w64_cxx') }}      # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}make
    - {{ posix }}sed               # [win]
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-hmisc >=4.1
    - r-matrix
    - r-rcpp >=0.12.12
    - r-rcppeigen
    - r-tmb
    - r-digest
    - r-dplyr
    - r-ggplot2
    - r-ggpubr
    - r-plyr
    - r-reshape2
    - r-scales
    - r-sp
    - r-spacetime
    - r-sparseinv
    - r-statmod

  run:
    - r-base
    - {{native}}gcc-libs         # [win]
    - r-hmisc >=4.1
    - r-matrix
    - r-rcpp >=0.12.12
    - r-rcppeigen
    - r-tmb
    - r-digest
    - r-dplyr
    - r-ggplot2
    - r-ggpubr
    - r-plyr
    - r-reshape2
    - r-scales
    - r-sp
    - r-spacetime
    - r-sparseinv
    - r-statmod

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('FRK')"           # [not win]
    - "\"%R%\" -e \"library('FRK')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://andrewzm.github.io/FRK/, https://github.com/andrewzm/FRK/
  license: GPL-2
  summary: A tool for spatial/spatio-temporal modelling and prediction with large datasets. The
    approach models the field, and hence the covariance function, using a set of basis
    functions. This fixed-rank basis-function representation facilitates the modelling
    of big data, and the method naturally allows for non-stationary, anisotropic covariance
    functions. Discretisation of the spatial domain into so-called basic areal units
    (BAUs) facilitates the use of observations with varying support (i.e., both point-referenced
    and areal supports, potentially simultaneously), and prediction over arbitrary user-specified
    regions. `FRK` also supports inference over various manifolds, including the 2D
    plane and 3D sphere, and it provides helper functions to model, fit, predict, and
    plot with relative ease. Version 2.0.0 and above also supports the modelling of
    non-Gaussian data (e.g., Poisson, binomial, negative-binomial, gamma, and inverse-Gaussian)
    by employing a generalised linear mixed model (GLMM) framework.  Zammit-Mangion
    and Cressie <doi:10.18637/jss.v098.i04> describe `FRK` in a Gaussian setting, and
    detail its use of basis functions and BAUs, while Sainsbury-Dale et al. <arXiv:2110.02507>
    describe `FRK` in a non-Gaussian setting; two vignettes are available that summarise
    these papers and provide additional examples.
  license_family: GPL2
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-2'

# The original CRAN metadata for this package was:

# Package: FRK
# Type: Package
# Title: Fixed Rank Kriging
# Version: 2.2.0
# Date: 2023-10-18
# Authors@R: c( person("Andrew", "Zammit-Mangion", , "andrewzm@gmail.com", c("aut", "cre")), person("Matthew", "Sainsbury-Dale", , "msdale@uow.edu.au", c("aut")))
# Maintainer: Andrew Zammit-Mangion <andrewzm@gmail.com>
# VignetteBuilder: knitr
# Description: A tool for spatial/spatio-temporal modelling and prediction with large datasets. The approach models the field, and hence the covariance function, using a set of basis functions. This fixed-rank basis-function representation facilitates the modelling of big data, and the method naturally allows for non-stationary, anisotropic covariance functions. Discretisation of the spatial domain into so-called basic areal units (BAUs) facilitates the use of observations with varying support (i.e., both point-referenced and areal supports, potentially simultaneously), and prediction over arbitrary user-specified regions. `FRK` also supports inference over various manifolds, including the 2D plane and 3D sphere, and it provides helper functions to model, fit, predict, and plot with relative ease. Version 2.0.0 and above also supports the modelling of non-Gaussian data (e.g., Poisson, binomial, negative-binomial, gamma, and inverse-Gaussian) by employing a generalised linear mixed model (GLMM) framework.  Zammit-Mangion and Cressie <doi:10.18637/jss.v098.i04> describe `FRK` in a Gaussian setting, and detail its use of basis functions and BAUs, while Sainsbury-Dale et al. <arXiv:2110.02507> describe `FRK` in a non-Gaussian setting; two vignettes are available that summarise these papers and provide additional examples.
# URL: https://andrewzm.github.io/FRK/, https://github.com/andrewzm/FRK/
# BugReports: https://github.com/andrewzm/FRK/issues/
# Depends: R (>= 3.5.0)
# Suggests: covr, dggrids, gstat, INLA, knitr, mapproj, parallel, sf, spdep, splancs, testthat, verification
# Imports: digest, dplyr, ggplot2, grDevices, Hmisc (>= 4.1), Matrix, methods, plyr, Rcpp (>= 0.12.12), sp, spacetime, sparseinv, statmod, stats, TMB, utils, ggpubr, reshape2, scales
# Additional_repositories: https://andrewzm.github.io/dggrids-repo/, https://inla.r-inla-download.org/R/stable/
# License: GPL (>= 2)
# NeedsCompilation: yes
# LazyData: true
# RoxygenNote: 7.2.3
# LinkingTo: Rcpp, TMB, RcppEigen
# Encoding: UTF-8
# Packaged: 2023-10-18 12:06:30 UTC; andrewzm
# Author: Andrew Zammit-Mangion [aut, cre], Matthew Sainsbury-Dale [aut]
# Repository: CRAN
# Date/Publication: 2023-10-18 13:30:08 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
