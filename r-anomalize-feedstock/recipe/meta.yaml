{% set version = '0.3.0' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-anomalize
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/anomalize_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/anomalize/anomalize_{{ version }}.tar.gz
  sha256: 4508b1aca16b15defefb723074a7008e426b6f0adc3e5dcd236e737ef88a6f8c

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip
  noarch: generic

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: tidyverse, tidyquant, stringr, testthat (>= 2.1.0), covr, knitr, rmarkdown, devtools, roxygen2
requirements:
  build:
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-dplyr
    - r-ggplot2
    - r-glue
    - r-purrr
    - r-rlang
    - r-sweep
    - r-tibble
    - r-tibbletime >=0.1.5
    - r-tidyr >=1.0.0
    - r-timetk

  run:
    - r-base
    - r-dplyr
    - r-ggplot2
    - r-glue
    - r-purrr
    - r-rlang
    - r-sweep
    - r-tibble
    - r-tibbletime >=0.1.5
    - r-tidyr >=1.0.0
    - r-timetk

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('anomalize')"           # [not win]
    - "\"%R%\" -e \"library('anomalize')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://github.com/business-science/anomalize
  license: GPL-3
  summary: The 'anomalize' package enables a "tidy" workflow for detecting anomalies in data.
    The main functions are time_decompose(), anomalize(), and time_recompose(). When
    combined, it's quite simple to decompose time series, detect anomalies, and create
    bands separating the "normal" data from the anomalous data at scale (i.e. for multiple
    time series). Time series decomposition is used to remove trend and seasonal components
    via the time_decompose() function and methods include seasonal decomposition of
    time series by Loess ("stl") and seasonal decomposition by piecewise medians ("twitter").
    The anomalize() function implements two methods for anomaly detection of residuals
    including using an inner quartile range ("iqr") and generalized extreme studentized
    deviation ("gesd"). These methods are based on those used in the 'forecast' package
    and the Twitter 'AnomalyDetection' package. Refer to the associated functions for
    specific references for these methods.
  license_family: GPL3
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-3'

# The original CRAN metadata for this package was:

# Package: anomalize
# Type: Package
# Title: Tidy Anomaly Detection
# Version: 0.3.0
# Authors@R: c( person("Matt", "Dancho", email = "mdancho@business-science.io", role = c("aut", "cre")), person("Davis", "Vaughan", email = "dvaughan@business-science.io", role = c("aut")) )
# Description: The 'anomalize' package enables a "tidy" workflow for detecting anomalies in data. The main functions are time_decompose(), anomalize(), and time_recompose(). When combined, it's quite simple to decompose time series, detect anomalies, and create bands separating the "normal" data from the anomalous data at scale (i.e. for multiple time series). Time series decomposition is used to remove trend and seasonal components via the time_decompose() function and methods include seasonal decomposition of time series by Loess ("stl") and seasonal decomposition by piecewise medians ("twitter"). The anomalize() function implements two methods for anomaly detection of residuals including using an inner quartile range ("iqr") and generalized extreme studentized deviation ("gesd"). These methods are based on those used in the 'forecast' package and the Twitter 'AnomalyDetection' package. Refer to the associated functions for specific references for these methods.
# URL: https://github.com/business-science/anomalize
# BugReports: https://github.com/business-science/anomalize/issues
# License: GPL (>= 3)
# Encoding: UTF-8
# LazyData: true
# Depends: R (>= 3.0.0)
# Imports: dplyr, glue, timetk, sweep, tibbletime (>= 0.1.5), purrr, rlang, tibble, tidyr (>= 1.0.0), ggplot2
# RoxygenNote: 7.2.3
# Suggests: tidyverse, tidyquant, stringr, testthat (>= 2.1.0), covr, knitr, rmarkdown, devtools, roxygen2
# VignetteBuilder: knitr
# NeedsCompilation: no
# Packaged: 2023-10-31 20:39:32 UTC; mdancho
# Author: Matt Dancho [aut, cre], Davis Vaughan [aut]
# Maintainer: Matt Dancho <mdancho@business-science.io>
# Repository: CRAN
# Date/Publication: 2023-10-31 21:50:02 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
