{% set version = '0.1.7' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-rpymat
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/rpymat_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/rpymat/rpymat_{{ version }}.tar.gz
  sha256: 780c8488526d5cc4b15022419a69a87a05b33870d3e6a657da7411de8124387f

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip
  noarch: generic

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: spelling
requirements:
  build:
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-irkernel >=1.3
    - r-fastmap >=1.1.0
    - r-glue >=1.4.2
    - r-jsonlite >=1.7.3
    - r-rappdirs >=0.3.3
    - r-reticulate >=1.21
    - r-rstudioapi >=0.13

  run:
    - r-base
    - r-irkernel >=1.3
    - r-fastmap >=1.1.0
    - r-glue >=1.4.2
    - r-jsonlite >=1.7.3
    - r-rappdirs >=0.3.3
    - r-reticulate >=1.21
    - r-rstudioapi >=0.13

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('rpymat')"           # [not win]
    - "\"%R%\" -e \"library('rpymat')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://github.com/dipterix/rpymat, http://dipterix.org/rpymat/
  license: Apache License (>= 2)
  summary: Aims to create a single isolated 'Miniconda' and 'Python' environment for reproducible
    pipeline scripts. The package provides utilities to run system command within the
    'conda' environment, making it easy to install, launch, manage, and stop 'Jupyter-lab'.
  license_family: APACHE

# The original CRAN metadata for this package was:

# Package: rpymat
# Type: Package
# Title: Easy to Configure an Isolated 'Python' Environment
# Version: 0.1.7
# Authors@R: c( person("Zhengjia", "Wang", email = "dipterix.wang@gmail.com", role = c("cph", "aut", "cre")) )
# Description: Aims to create a single isolated 'Miniconda' and 'Python' environment for reproducible pipeline scripts. The package provides utilities to run system command within the 'conda' environment, making it easy to install, launch, manage, and stop 'Jupyter-lab'.
# License: Apache License (>= 2)
# Encoding: UTF-8
# Language: en-US
# RoxygenNote: 7.2.3
# URL: https://github.com/dipterix/rpymat, http://dipterix.org/rpymat/
# BugReports: https://github.com/dipterix/rpymat/issues
# Imports: utils, reticulate (>= 1.21), fastmap (>= 1.1.0), rappdirs (>= 0.3.3), glue (>= 1.4.2), IRkernel (>= 1.3), jsonlite (>= 1.7.3), rstudioapi (>= 0.13)
# Suggests: spelling
# NeedsCompilation: no
# Packaged: 2023-08-21 20:34:53 UTC; dipterix
# Author: Zhengjia Wang [cph, aut, cre]
# Maintainer: Zhengjia Wang <dipterix.wang@gmail.com>
# Repository: CRAN
# Date/Publication: 2023-08-22 03:20:02 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
