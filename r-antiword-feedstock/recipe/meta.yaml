{% set version = '1.3.1' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-antiword
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/antiword_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/antiword/antiword_{{ version }}.tar.gz
  sha256: 62864921e007c08f60ec8ce215706b95f682d0a0edf4b1437606f2cfe8477b88

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}make
    - {{ posix }}sed               # [win]
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-sys >=2.0

  run:
    - r-base
    - {{native}}gcc-libs         # [win]
    - r-sys >=2.0

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('antiword')"           # [not win]
    - "\"%R%\" -e \"library('antiword')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://docs.ropensci.org/antiword/ (website), https://github.com/ropensci/antiword
    (devel) http://www.winfield.demon.nl (upstream)
  license: GPL-2
  summary: Wraps the 'AntiWord' utility to extract text from Microsoft Word documents. The utility
    only supports the old 'doc' format, not the new xml based 'docx' format. Use the
    'xml2' package to read the latter.
  license_family: GPL2
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-2'

extra:
  recipe-maintainers:
    - katietz

# The original CRAN metadata for this package was:

# Package: antiword
# Type: Package
# Title: Extract Text from Microsoft Word Documents
# Version: 1.3.1
# Authors@R: c( person("Jeroen", "Ooms", ,"jeroen@berkeley.edu", role = c("aut", "cre"), comment = c(ORCID = "0000-0002-4035-0289")), person("Adri van Os", role = "cph", comment = "Author 'antiword' utility"))
# Description: Wraps the 'AntiWord' utility to extract text from Microsoft Word documents. The utility only supports the old 'doc' format, not the new xml based 'docx' format. Use the 'xml2' package to read the latter.
# License: GPL-2
# Encoding: UTF-8
# Imports: sys (>= 2.0)
# RoxygenNote: 6.0.1
# URL: https://docs.ropensci.org/antiword/ (website), https://github.com/ropensci/antiword (devel) http://www.winfield.demon.nl (upstream)
# BugReports: https://github.com/ropensci/antiword/issues
# NeedsCompilation: yes
# Packaged: 2022-03-21 15:56:21 UTC; jeroen
# Author: Jeroen Ooms [aut, cre] (<https://orcid.org/0000-0002-4035-0289>), Adri van Os [cph] (Author 'antiword' utility)
# Maintainer: Jeroen Ooms <jeroen@berkeley.edu>
# Repository: CRAN
# Date/Publication: 2022-03-21 16:20:02 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
