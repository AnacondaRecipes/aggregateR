{% set version = '3.1.3' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-ecp
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/ecp_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/ecp/ecp_{{ version }}.tar.gz
  sha256: a80ab10bafe30cc96287b9220e44c4b4eda40f5dd0546e4d2a2e1baab514c058

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: mvtnorm, MASS, combinat, R.rsp
requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{ compiler('cxx') }}            # [not win]
    - {{ compiler('m2w64_cxx') }}      # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}make
    - {{ posix }}sed               # [win]
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-rcpp

  run:
    - r-base
    - {{native}}gcc-libs         # [win]
    - r-rcpp

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('ecp')"           # [not win]
    - "\"%R%\" -e \"library('ecp')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://CRAN.R-project.org/package=ecp
  license: GPL-2
  summary: Implements various procedures for finding multiple change-points from Matteson D.
    et al (2013) <doi:10.1080/01621459.2013.849605>, Zhang W. et al (2017) <doi:10.1109/ICDMW.2017.44>,
    Arlot S. et al (2019). Two methods make use of dynamic programming and pruning,
    with no distributional assumptions other than the existence of certain absolute
    moments in one method. Hierarchical and exact search methods are included. All methods
    return the set of estimated change- points as well as other summary information.
  license_family: GPL2
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-2'

extra:
  recipe-maintainers:
    - katietz

# The original CRAN metadata for this package was:

# Package: ecp
# Type: Package
# Title: Non-Parametric Multiple Change-Point Analysis of Multivariate Data
# Version: 3.1.3
# Date: 2020-10-24
# Author: Nicholas A. James, Wenyu Zhang and David S. Matteson
# Maintainer: Wenyu Zhang <wz258@cornell.edu>
# Description: Implements various procedures for finding multiple change-points from Matteson D. et al (2013) <doi:10.1080/01621459.2013.849605>, Zhang W. et al (2017) <doi:10.1109/ICDMW.2017.44>, Arlot S. et al (2019). Two methods make use of dynamic programming and pruning, with no distributional assumptions other than the existence of certain absolute moments in one method. Hierarchical and exact search methods are included. All methods return the set of estimated change- points as well as other summary information.
# License: GPL (>= 2)
# Depends: R (>= 3.00), Rcpp
# Suggests: mvtnorm, MASS, combinat, R.rsp
# LinkingTo: Rcpp
# NeedsCompilation: yes
# Repository: CRAN
# VignetteBuilder: R.rsp
# Packaged: 2020-10-25 09:31:55 UTC; wenyuzhang
# Date/Publication: 2020-10-25 14:20:07 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
