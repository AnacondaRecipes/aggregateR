{% set version = '1.1.3' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-azurekusto
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/AzureKusto_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/AzureKusto/AzureKusto_{{ version }}.tar.gz
  sha256: d461657ee00323487d547653a48c26f0dd284cb5e8adfb19ebe2e997a49a0b58

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip
  noarch: generic

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: bit64, knitr, testthat, AzureGraph, AzureStor (>= 2.0.0), rmarkdown
requirements:
  build:
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-azureauth
    - r-azurermr >=2.0.0
    - r-dbi >=1.0.0
    - r-r6
    - r-dplyr
    - r-httr >=1.3
    - r-jsonlite
    - r-openssl
    - r-rlang
    - r-tibble
    - r-tidyr
    - r-tidyselect >=0.2.4

  run:
    - r-base
    - r-azureauth
    - r-azurermr >=2.0.0
    - r-dbi >=1.0.0
    - r-r6
    - r-dplyr
    - r-httr >=1.3
    - r-jsonlite
    - r-openssl
    - r-rlang
    - r-tibble
    - r-tidyr
    - r-tidyselect >=0.2.4

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('AzureKusto')"           # [not win]
    - "\"%R%\" -e \"library('AzureKusto')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://github.com/Azure/AzureKusto https://github.com/Azure/AzureR
  license: MIT
  summary: 'An interface to ''Azure Data Explorer'', also known as ''Kusto'', a fast, distributed
    data exploration service from Microsoft: <https://azure.microsoft.com/en-us/products/data-explorer/>.
    Includes ''DBI'' and ''dplyr'' interfaces, with the latter modelled after the ''dbplyr''
    package, whereby queries are translated from R into the native ''KQL'' query language
    and executed lazily. On the admin side, the package extends the object framework
    provided by ''AzureRMR'' to support creation and deletion of databases, and management
    of database principals. Part of the ''AzureR'' family of packages.'
  license_family: MIT
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/MIT'
    - LICENSE

# The original CRAN metadata for this package was:

# Package: AzureKusto
# Title: Interface to 'Kusto'/'Azure Data Explorer'
# Version: 1.1.3
# Authors@R: c( person("Hong", "Ooi", , "hongooi73@gmail.com", role = "aut"), person("Alex", "Kyllo", , "jekyllo@microsoft.com", role = c("aut", "cre")), person("dbplyr development team", role="cph", comment="Original framework for dplyr/database interface"), person("Microsoft", role = "cph") )
# Description: An interface to 'Azure Data Explorer', also known as 'Kusto', a fast, distributed data exploration service from Microsoft: <https://azure.microsoft.com/en-us/products/data-explorer/>. Includes 'DBI' and 'dplyr' interfaces, with the latter modelled after the 'dbplyr' package, whereby queries are translated from R into the native 'KQL' query language and executed lazily. On the admin side, the package extends the object framework provided by 'AzureRMR' to support creation and deletion of databases, and management of database principals. Part of the 'AzureR' family of packages.
# URL: https://github.com/Azure/AzureKusto https://github.com/Azure/AzureR
# BugReports: https://github.com/Azure/AzureKusto/issues
# License: MIT + file LICENSE
# Encoding: UTF-8
# VignetteBuilder: knitr
# Depends: R (>= 3.3)
# Imports: rlang, methods, utils, httr (>= 1.3), jsonlite, R6, openssl, AzureAuth, AzureRMR (>= 2.0.0), tibble, dplyr, tidyr, tidyselect (>= 0.2.4), DBI (>= 1.0.0)
# Suggests: bit64, knitr, testthat, AzureGraph, AzureStor (>= 2.0.0), rmarkdown
# RoxygenNote: 7.2.3
# NeedsCompilation: no
# Packaged: 2023-10-11 18:42:27 UTC; alex
# Author: Hong Ooi [aut], Alex Kyllo [aut, cre], dbplyr development team [cph] (Original framework for dplyr/database interface), Microsoft [cph]
# Maintainer: Alex Kyllo <jekyllo@microsoft.com>
# Repository: CRAN
# Date/Publication: 2023-10-12 09:40:19 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
