{% set version = '0.8.0' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-rdhs
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/rdhs_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/rdhs/rdhs_{{ version }}.tar.gz
  sha256: fba39a4cde0ed7b833a15a727638e5ff314f3099b8939d85308db47cea81e57e

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip
  noarch: generic

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: testthat, knitr, rmarkdown, ggplot2, survey, data.table, microbenchmark
requirements:
  build:
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-r6
    - r-brio
    - r-cli
    - r-digest
    - r-foreign
    - r-getpass
    - r-haven
    - r-httr
    - r-iotools
    - r-jsonlite
    - r-magrittr
    - r-qdapregex
    - r-rappdirs
    - r-rlang
    - r-sf
    - r-storr
    - r-xml2

  run:
    - r-base
    - r-r6
    - r-brio
    - r-cli
    - r-digest
    - r-foreign
    - r-getpass
    - r-haven
    - r-httr
    - r-iotools
    - r-jsonlite
    - r-magrittr
    - r-qdapregex
    - r-rappdirs
    - r-rlang
    - r-sf
    - r-storr
    - r-xml2

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('rdhs')"           # [not win]
    - "\"%R%\" -e \"library('rdhs')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://docs.ropensci.org/rdhs/
  license: MIT
  summary: Provides a client for (1) querying the DHS API for survey indicators and metadata
    (<https://api.dhsprogram.com/#/index.html>), (2) identifying surveys and datasets
    for analysis, (3) downloading survey datasets from the DHS website, (4) loading
    datasets and associate metadata into R, and (5) extracting variables and combining
    datasets for pooled analysis.
  license_family: MIT
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/MIT'
    - LICENSE

# The original CRAN metadata for this package was:

# Package: rdhs
# Type: Package
# Title: API Client and Dataset Management for the Demographic and Health Survey (DHS) Data
# Version: 0.8.0
# Authors@R: c(person(given = "OJ", family = "Watson", role = c("aut", "cre"), email = "oj.watson@hotmail.co.uk", comment = c(ORCID = "0000-0003-2374-0741")), person(given = "Jeff", family = "Eaton", role = "aut", comment = c(ORCID = "0000-0001-7728-728X")), person(given = "Lucy", family = "D'Agostino McGowan", role = "rev", comment = c(ORCID = "0000-0001-7297-9359")), person(given = "Duncan", family = "Gillespie", role = "rev"))
# Maintainer: OJ Watson <oj.watson@hotmail.co.uk>
# URL: https://docs.ropensci.org/rdhs/
# BugReports: https://github.com/ropensci/rdhs/issues
# Description: Provides a client for (1) querying the DHS API for survey indicators and metadata (<https://api.dhsprogram.com/#/index.html>), (2) identifying surveys and datasets for analysis, (3) downloading survey datasets from the DHS website, (4) loading datasets and associate metadata into R, and (5) extracting variables and combining datasets for pooled analysis.
# LazyData: TRUE
# Depends: R (>= 3.3.0)
# Imports: brio, R6, httr, jsonlite, foreign, magrittr, rappdirs, digest, storr, xml2, qdapRegex, getPass, haven, iotools, sf, cli, rlang
# Suggests: testthat, knitr, rmarkdown, ggplot2, survey, data.table, microbenchmark
# License: MIT + file LICENSE
# RoxygenNote: 7.2.3
# VignetteBuilder: knitr
# Language: en-GB
# Encoding: UTF-8
# NeedsCompilation: no
# Packaged: 2023-10-10 21:27:18 UTC; oj
# Author: OJ Watson [aut, cre] (<https://orcid.org/0000-0003-2374-0741>), Jeff Eaton [aut] (<https://orcid.org/0000-0001-7728-728X>), Lucy D'Agostino McGowan [rev] (<https://orcid.org/0000-0001-7297-9359>), Duncan Gillespie [rev]
# Repository: CRAN
# Date/Publication: 2023-10-10 21:40:03 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
