{% set version = '1.1.5-2' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-genieclust
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/genieclust_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/genieclust/genieclust_{{ version }}.tar.gz
  sha256: 1354cffb0bbdeb0de9e08f2cb69a232b491fba1fed89e3ee0d0430eb371f1959

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: datasets, mlpack
requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{ compiler('cxx') }}            # [not win]
    - {{ compiler('m2w64_cxx') }}      # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}make
    - {{ posix }}sed               # [win]
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-rcpp >=1.0.4

  run:
    - r-base
    - {{native}}gcc-libs         # [win]
    - r-rcpp >=1.0.4

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('genieclust')"           # [not win]
    - "\"%R%\" -e \"library('genieclust')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://genieclust.gagolewski.com/, https://clustering-benchmarks.gagolewski.com/,
    https://github.com/gagolews/genieclust
  license: AGPL-3
  summary: A retake on the Genie algorithm (Gagolewski, 2021 <DOI:10.1016/j.softx.2021.100722>)
    - a robust hierarchical clustering method (Gagolewski, Bartoszuk, Cena, 2016 <DOI:10.1016/j.ins.2016.05.003>).
    Now faster and more memory efficient; determining the whole hierarchy for datasets
    of 10M points in low dimensional Euclidean spaces or 100K points in high-dimensional
    ones takes only 1-2 minutes. Allows clustering with respect to mutual reachability
    distances so that it can act as a noise point detector or a robustified version
    of 'HDBSCAN*' (that is able to detect a predefined number of clusters and hence
    it does not dependent on the somewhat fragile 'eps' parameter). The package also
    features an implementation of inequality indices (the Gini, Bonferroni index), external
    cluster validity measures (e.g., the normalised clustering accuracy and partition
    similarity scores such as the adjusted Rand, Fowlkes-Mallows, adjusted mutual information,
    and the pair sets index), and internal cluster validity indices (e.g., the Calinski-Harabasz,
    Davies-Bouldin, Ball-Hall, Silhouette, and generalised Dunn indices). See also the
    'Python' version of 'genieclust' available on 'PyPI', which supports sparse data,
    more metrics, and even larger datasets.
  license_family: AGPL
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/AGPL-3'

# The original CRAN metadata for this package was:

# Package: genieclust
# Type: Package
# Title: Fast and Robust Hierarchical Clustering with Noise Points Detection
# Version: 1.1.5-2
# Date: 2023-10-18
# Authors@R: c( person("Marek", "Gagolewski", role = c("aut", "cre", "cph"), email = "marek@gagolewski.com", comment = c(ORCID = "0000-0003-0637-6028")), person("Maciej", "Bartoszuk", role = c("ctb")), person("Anna", "Cena", role = c("ctb")), person("Peter M.", "Larsen", role = c("ctb")) )
# Description: A retake on the Genie algorithm (Gagolewski, 2021 <DOI:10.1016/j.softx.2021.100722>) - a robust hierarchical clustering method (Gagolewski, Bartoszuk, Cena, 2016 <DOI:10.1016/j.ins.2016.05.003>). Now faster and more memory efficient; determining the whole hierarchy for datasets of 10M points in low dimensional Euclidean spaces or 100K points in high-dimensional ones takes only 1-2 minutes. Allows clustering with respect to mutual reachability distances so that it can act as a noise point detector or a robustified version of 'HDBSCAN*' (that is able to detect a predefined number of clusters and hence it does not dependent on the somewhat fragile 'eps' parameter). The package also features an implementation of inequality indices (the Gini, Bonferroni index), external cluster validity measures (e.g., the normalised clustering accuracy and partition similarity scores such as the adjusted Rand, Fowlkes-Mallows, adjusted mutual information, and the pair sets index), and internal cluster validity indices (e.g., the Calinski-Harabasz, Davies-Bouldin, Ball-Hall, Silhouette, and generalised Dunn indices). See also the 'Python' version of 'genieclust' available on 'PyPI', which supports sparse data, more metrics, and even larger datasets.
# BugReports: https://github.com/gagolews/genieclust/issues
# URL: https://genieclust.gagolewski.com/, https://clustering-benchmarks.gagolewski.com/, https://github.com/gagolews/genieclust
# License: AGPL-3
# Imports: Rcpp (>= 1.0.4), stats, utils
# Suggests: datasets, mlpack
# LinkingTo: Rcpp
# Encoding: UTF-8
# SystemRequirements: OpenMP
# RoxygenNote: 7.2.3
# NeedsCompilation: yes
# Packaged: 2023-10-18 08:43:24 UTC; gagolews
# Author: Marek Gagolewski [aut, cre, cph] (<https://orcid.org/0000-0003-0637-6028>), Maciej Bartoszuk [ctb], Anna Cena [ctb], Peter M. Larsen [ctb]
# Maintainer: Marek Gagolewski <marek@gagolewski.com>
# Repository: CRAN
# Date/Publication: 2023-10-18 09:50:06 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
