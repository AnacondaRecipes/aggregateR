{% set version = '2.0.0' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-landscapemetrics
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/landscapemetrics_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/landscapemetrics/landscapemetrics_{{ version }}.tar.gz
  sha256: f63c83b65e89205b88fdb7656982fe198ad7eabf8bc049f993c961dd9336f030

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: covr, dplyr, knitr, raster, rmarkdown, sf, sp, stars, stringr, testthat, tidyr
requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{ compiler('cxx') }}            # [not win]
    - {{ compiler('m2w64_cxx') }}      # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}make
    - {{ posix }}sed               # [win]
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-rcpp >=0.11.0
    - r-rcpparmadillo
    - r-cli
    - r-ggplot2
    - r-terra
    - r-tibble

  run:
    - r-base
    - {{native}}gcc-libs         # [win]
    - r-rcpp >=0.11.0
    - r-rcpparmadillo
    - r-cli
    - r-ggplot2
    - r-terra
    - r-tibble

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('landscapemetrics')"           # [not win]
    - "\"%R%\" -e \"library('landscapemetrics')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://r-spatialecology.github.io/landscapemetrics/
  license: GPL-3
  summary: Calculates landscape metrics for categorical landscape patterns in a tidy workflow.
    'landscapemetrics' reimplements the most common metrics from 'FRAGSTATS' (<https://www.fragstats.org/>)
    and new ones from the current literature on landscape metrics. This package supports
    'terra' SpatRaster objects as input arguments. It further provides utility functions
    to visualize patches, select metrics and building blocks to develop new metrics.
  license_family: GPL3
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-3'

# The original CRAN metadata for this package was:

# Type: Package
# Package: landscapemetrics
# Title: Landscape Metrics for Categorical Map Patterns
# Version: 2.0.0
# Authors@R: c(person("Maximilian H.K.", "Hesselbarth", role = c("aut", "cre"), email = "mhk.hesselbarth@gmail.com", comment = c(ORCID = "0000-0003-1125-9918")), person("Marco", "Sciaini", role = "aut", email = "sciaini.marco@gmail.com", comment = c(ORCID = "0000-0002-3042-5435")), person("Jakub", "Nowosad", role = "aut", email = "nowosad.jakub@gmail.com", comment = c(ORCID = "0000-0002-1057-3721")), person("Sebastian", "Hanss", role = "aut", comment = c(ORCID = "0000-0002-3990-4897")), person("Laura J.", "Graham", role = "ctb", comment = "Input on package structure"), person("Jeffrey", "Hollister", role = "ctb", comment = "Input on package structure"), person("Kimberly A.", "With", role = "ctb", comment = "Input on package structure"), person("Florian", "Prive", role = "ctb", comment = "Original author of underlying C++ code for get_nearestneighbour() function"), person("Project Nayuki", role = "ctb", comment = "Original author of underlying C++ code for get_circumscribingcircle and lsm_p_circle"), person("Matt", "Strimas-Mackey", role = "ctb", comment = "Bugfix in sample_metrics()") )
# Maintainer: Maximilian H.K. Hesselbarth <mhk.hesselbarth@gmail.com>
# Description: Calculates landscape metrics for categorical landscape patterns in a tidy workflow. 'landscapemetrics' reimplements the most common metrics from 'FRAGSTATS' (<https://www.fragstats.org/>) and new ones from the current literature on landscape metrics. This package supports 'terra' SpatRaster objects as input arguments. It further provides utility functions to visualize patches, select metrics and building blocks to develop new metrics.
# License: GPL-3
# URL: https://r-spatialecology.github.io/landscapemetrics/
# BugReports: https://github.com/r-spatialecology/landscapemetrics/issues
# Depends: R (>= 3.6)
# Imports: cli, ggplot2, methods, Rcpp (>= 0.11.0), stats, terra, tibble
# Suggests: covr, dplyr, knitr, raster, rmarkdown, sf, sp, stars, stringr, testthat, tidyr
# LinkingTo: Rcpp, RcppArmadillo
# ByteCompile: true
# Encoding: UTF-8
# LazyData: true
# Config/testthat/edition: 3
# RoxygenNote: 7.2.3
# VignetteBuilder: knitr
# NeedsCompilation: yes
# Packaged: 2023-10-03 07:19:35 UTC; hesselbarth
# Author: Maximilian H.K. Hesselbarth [aut, cre] (<https://orcid.org/0000-0003-1125-9918>), Marco Sciaini [aut] (<https://orcid.org/0000-0002-3042-5435>), Jakub Nowosad [aut] (<https://orcid.org/0000-0002-1057-3721>), Sebastian Hanss [aut] (<https://orcid.org/0000-0002-3990-4897>), Laura J. Graham [ctb] (Input on package structure), Jeffrey Hollister [ctb] (Input on package structure), Kimberly A. With [ctb] (Input on package structure), Florian Prive [ctb] (Original author of underlying C++ code for get_nearestneighbour() function), Project Nayuki [ctb] (Original author of underlying C++ code for get_circumscribingcircle and lsm_p_circle), Matt Strimas-Mackey [ctb] (Bugfix in sample_metrics())
# Repository: CRAN
# Date/Publication: 2023-10-03 13:00:02 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
