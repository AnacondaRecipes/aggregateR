{% set version = '5.2.1-15' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-rmumps
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/rmumps_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/rmumps/rmumps_{{ version }}.tar.gz
  sha256: 762e5ae0761445f2582fb795abe0aac2d1fccc09ba55e5aa679c68dadba52c4f

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: testthat, Matrix, slam
requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{ compiler('cxx') }}            # [not win]
    - {{ compiler('m2w64_cxx') }}      # [win]
    - {{ compiler('fortran') }}        # [not win]
    - {{ compiler('m2w64_fortran') }}  # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}make
    - {{ posix }}sed               # [win]
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-rcpp >=0.12.0
    - mumps

  run:
    - r-base
    - {{native}}gcc-libs         # [win]
    - r-rcpp >=0.12.0
    - mumps

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('rmumps')"           # [not win]
    - "\"%R%\" -e \"library('rmumps')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: http://mumps.enseeiht.fr/, https://github.com/sgsokol/rmumps/
  license: GPL-2
  summary: 'Some basic features of ''MUMPS'' (Multifrontal Massively Parallel sparse direct Solver)
    are wrapped in a class whose methods can be used for sequentially solving a sparse
    linear system (symmetric or not) with one or many right hand sides (dense or sparse).
    There is a possibility to do separately symbolic analysis, LU (or LDL^t) factorization
    and system solving. Third part ordering libraries are included and can be used:
    ''PORD'', ''METIS'', ''SCOTCH''. ''MUMPS'' method was first described in Amestoy
    et al. (2001) <doi:10.1137/S0895479899358194> and Amestoy et al. (2006) <doi:10.1016/j.parco.2005.07.004>.'
  license_family: GPL2
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-2'

extra:
  recipe-maintainers:
    - katietz

# The original CRAN metadata for this package was:

# Package: rmumps
# Type: Package
# Title: Wrapper for MUMPS Library
# Version: 5.2.1-15
# Date: 2022-03-25
# Authors@R: c(person("Serguei", "Sokol", role=c("aut", "cre"), email="sokol@insa-toulouse.fr"), person("Emmanuel", "Agullo", role="ctb"), person("Patrick", "Amestoy", role=c("ctb", "cph")), person("Maurice", "Bremond", role="ctb"), person("Alfredo", "Buttari", role="ctb"), person("Philippe", "Combes", role="ctb"), person("Marie", "Durand", role="ctb"), person("Aurelia", "Fevre", role="ctb"), person("Abdou", "Guermouche", role="ctb"), person("Guillaume", "Joslin", role="ctb"), person("Jacko", "Koster", role="ctb"), person("Jean-Yves", "L'Excellent", role="ctb"), person("Stephane", "Pralet", role="ctb"), person("Chiara", "Puglisi", role="ctb"), person("Francois-Henry", "Rouet", role="ctb"), person("Wissam", "Sid-Lakhdar", role="ctb"), person("Tzvetomila", "Slavova", role="ctb"), person("Bora", "Ucar", role="ctb"), person("Clement", "Weisbecker", role="ctb"), person("Juergen", "Schulze", role="ctb"), person("George", "Karypis", role="ctb"), person("Douglas C.", "Schmidt", role="ctb"), person("Isamu", "Hasegawa", role="ctb"), person("Alexander", "Chemeris", role="ctb"), person("Makoto", "Matsumoto", role="ctb"), person("Takuji", "Nishimura", role="ctb"), person("Francois", "Pellegrini", role="ctb"), person("David", "Goudin", role="ctb"), person("Pascal", "Henon", role="ctb"), person("Pierre", "Ramet", role="ctb"), person("Sebastien", "Fourestier", role="ctb"), person("Jun-Ho", "Her", role="ctb"), person("Cedric", "Chevalier", role="ctb"), person("Timothy A.", "Davis", role=c("ctb", "cph")), person("Iain S.", "Duff", role=c("ctb", "cph")), person("John K.", "Reid", role=c("ctb", "cph")), person("Richard", "Stallman", role="ctb"), person("Samuel", "Thibault", role=c("ctb", "cph")), person("CERFACS", role="cph"), person("CNRS", role="cph"), person("ENS Lyon", role="cph"), person("INP Toulouse", role="cph"), person("INRIA", role="cph"), person("University of Bordeaux", role="cph"), person("Regents of the University of Minnesota", role="cph"), person("Free Software Foundation, Inc", role="cph"), person("Alexander Chemeris", role="cph"), person("Makoto Matsumoto", role="cph"), person("Takuji Nishimura", role="cph"), person("Universite de Bordeaux", role="cph"), person("CNRS", role="cph"), person("INRAE", role="cph") )
# Maintainer: Serguei Sokol <sokol@insa-toulouse.fr>
# Description: Some basic features of 'MUMPS' (Multifrontal Massively Parallel sparse direct Solver) are wrapped in a class whose methods can be used for sequentially solving a sparse linear system (symmetric or not) with one or many right hand sides (dense or sparse). There is a possibility to do separately symbolic analysis, LU (or LDL^t) factorization and system solving. Third part ordering libraries are included and can be used: 'PORD', 'METIS', 'SCOTCH'. 'MUMPS' method was first described in Amestoy et al. (2001) <doi:10.1137/S0895479899358194> and Amestoy et al. (2006) <doi:10.1016/j.parco.2005.07.004>.
# License: GPL (>= 2)
# Depends: methods
# Imports: Rcpp (>= 0.12.0)
# LinkingTo: Rcpp
# SystemRequirements: C++11, GNU Make
# NeedsCompilation: yes
# Biarch: yes
# Suggests: testthat, Matrix, slam
# BugReports: https://github.com/sgsokol/rmumps/issues
# URL: http://mumps.enseeiht.fr/, https://github.com/sgsokol/rmumps/
# RoxygenNote: 7.0.2
# Encoding: UTF-8
# Packaged: 2022-03-25 08:55:25 UTC; sokol
# Author: Serguei Sokol [aut, cre], Emmanuel Agullo [ctb], Patrick Amestoy [ctb, cph], Maurice Bremond [ctb], Alfredo Buttari [ctb], Philippe Combes [ctb], Marie Durand [ctb], Aurelia Fevre [ctb], Abdou Guermouche [ctb], Guillaume Joslin [ctb], Jacko Koster [ctb], Jean-Yves L'Excellent [ctb], Stephane Pralet [ctb], Chiara Puglisi [ctb], Francois-Henry Rouet [ctb], Wissam Sid-Lakhdar [ctb], Tzvetomila Slavova [ctb], Bora Ucar [ctb], Clement Weisbecker [ctb], Juergen Schulze [ctb], George Karypis [ctb], Douglas C. Schmidt [ctb], Isamu Hasegawa [ctb], Alexander Chemeris [ctb], Makoto Matsumoto [ctb], Takuji Nishimura [ctb], Francois Pellegrini [ctb], David Goudin [ctb], Pascal Henon [ctb], Pierre Ramet [ctb], Sebastien Fourestier [ctb], Jun-Ho Her [ctb], Cedric Chevalier [ctb], Timothy A. Davis [ctb, cph], Iain S. Duff [ctb, cph], John K. Reid [ctb, cph], Richard Stallman [ctb], Samuel Thibault [ctb, cph], CERFACS [cph], CNRS [cph], ENS Lyon [cph], INP Toulouse [cph], INRIA [cph], University of Bordeaux [cph], Regents of the University of Minnesota [cph], Free Software Foundation, Inc [cph], Alexander Chemeris [cph], Makoto Matsumoto [cph], Takuji Nishimura [cph], Universite de Bordeaux [cph], CNRS [cph], INRAE [cph]
# Repository: CRAN
# Date/Publication: 2022-03-25 10:40:02 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
