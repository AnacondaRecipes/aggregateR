{% set version = '1.6' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-rmda
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/rmda_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/rmda/rmda_{{ version }}.tar.gz
  sha256: ac36e475e19e58e61570510ceb2ea2d81e1ba81f6a92c10f5134c5c8653af2d4

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip
  noarch: generic

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

requirements:
  build:
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-mass
    - r-caret
    - r-pander
    - r-reshape

  run:
    - r-base
    - r-mass
    - r-caret
    - r-pander
    - r-reshape

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('rmda')"           # [not win]
    - "\"%R%\" -e \"library('rmda')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: http://mdbrown.github.io/rmda/, https://github.com/mdbrown/rmda
  license: GPL-2
  summary: Provides tools to evaluate the value of using a risk prediction instrument to decide
    treatment or intervention (versus no treatment or intervention).  Given one or more
    risk prediction instruments (risk models) that estimate the probability of a binary
    outcome, rmda provides functions to estimate and display decision curves and other
    figures that help assess the population impact of using a risk model for clinical
    decision making.   Here, "population" refers to the relevant patient population.
    Decision curves display estimates of the (standardized) net benefit over a range
    of probability thresholds used to categorize observations as 'high risk'. The curves
    help evaluate a treatment policy that recommends treatment for patients who are
    estimated to be 'high risk' by comparing the population impact of a risk-based policy
    to "treat all" and "treat none" intervention policies.  Curves can be estimated
    using data from a prospective cohort.  In addition, rmda can estimate decision curves
    using data from a case-control study if an estimate of the population outcome prevalence
    is available.  Version 1.4 of the package provides an alternative framing of the
    decision problem for situations where treatment is the standard-of-care and a risk
    model might be used to recommend that low-risk patients (i.e., patients below some
    risk threshold) opt out of treatment. Confidence intervals calculated using the
    bootstrap can be computed and displayed. A wrapper function to calculate cross-validated
    curves using k-fold cross-validation is also provided.
  license_family: GPL2
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-2'

# The original CRAN metadata for this package was:

# Package: rmda
# Type: Package
# Title: Risk Model Decision Analysis
# Version: 1.6
# Date: 2018-07-17
# Author: Marshall Brown
# Maintainer: Marshall Brown <mdbrown@fredhutch.org>
# Description: Provides tools to evaluate the value of using a risk prediction instrument to decide treatment or intervention (versus no treatment or intervention).  Given one or more risk prediction instruments (risk models) that estimate the probability of a binary outcome, rmda provides functions to estimate and display decision curves and other figures that help assess the population impact of using a risk model for clinical decision making.   Here, "population" refers to the relevant patient population. Decision curves display estimates of the (standardized) net benefit over a range of probability thresholds used to categorize observations as 'high risk'. The curves help evaluate a treatment policy that recommends treatment for patients who are estimated to be 'high risk' by comparing the population impact of a risk-based policy to "treat all" and "treat none" intervention policies.  Curves can be estimated using data from a prospective cohort.  In addition, rmda can estimate decision curves using data from a case-control study if an estimate of the population outcome prevalence is available.  Version 1.4 of the package provides an alternative framing of the decision problem for situations where treatment is the standard-of-care and a risk model might be used to recommend that low-risk patients (i.e., patients below some risk threshold) opt out of treatment. Confidence intervals calculated using the bootstrap can be computed and displayed. A wrapper function to calculate cross-validated curves using k-fold cross-validation is also provided.
# License: GPL-2
# URL: http://mdbrown.github.io/rmda/, https://github.com/mdbrown/rmda
# LazyData: TRUE
# Imports: reshape, pander, MASS, caret
# RoxygenNote: 6.0.1
# NeedsCompilation: no
# Packaged: 2018-07-17 16:28:39 UTC; mdbrown
# Repository: CRAN
# Date/Publication: 2018-07-17 17:30:02 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
