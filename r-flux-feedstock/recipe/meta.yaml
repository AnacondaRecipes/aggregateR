{% set version = '0.3-0.1' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-flux
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/flux_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/flux/flux_{{ version }}.tar.gz
  sha256: af0c9f0265feda053d5f95a5d81a4bb2051ca5545572da6590c8d9be42cc71f6

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip
  noarch: generic

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

requirements:
  build:
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-catools

  run:
    - r-base
    - r-catools

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('flux')"           # [not win]
    - "\"%R%\" -e \"library('flux')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://CRAN.R-project.org/package=flux
  license: GPL-2
  summary: 'Functions for the calculation of greenhouse gas flux rates from closed chamber concentration
    measurements. The package follows a modular concept: Fluxes can be calculated in
    just two simple steps or in several steps if more control in details is wanted.
    Additionally plot and preparation functions as well as functions for modelling gpp
    and reco are provided.'
  license_family: GPL2
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-2'

extra:
  recipe-maintainers:
    - katietz

# The original CRAN metadata for this package was:

# Package: flux
# Type: Package
# Title: Flux Rate Calculation from Dynamic Closed Chamber Measurements
# Version: 0.3-0.1
# Date: 2014-04-23
# Author: Gerald Jurasinski, Franziska Koebsch, Anke Guenther, Sascha Beetz
# Maintainer: Gerald Jurasinski <gerald.jurasinski@uni-rostock.de>
# Depends: R (>= 2.12.0), caTools
# Description: Functions for the calculation of greenhouse gas flux rates from closed chamber concentration measurements. The package follows a modular concept: Fluxes can be calculated in just two simple steps or in several steps if more control in details is wanted. Additionally plot and preparation functions as well as functions for modelling gpp and reco are provided.
# License: GPL-2
# LazyLoad: yes
# Encoding: UTF-8
# Packaged: 2022-06-26 06:52:26 UTC; hornik
# NeedsCompilation: no
# Repository: CRAN
# Date/Publication: 2022-06-26 06:58:11 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
