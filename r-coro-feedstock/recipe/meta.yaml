{% set version = '1.0.3' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-coro
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/coro_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/coro/coro_{{ version }}.tar.gz
  sha256: 4e7729b1b1461be7805b2fcad0ed4c04755390dad3f1a2cb9f3af701db6d7d73

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip
  noarch: generic

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: knitr, later (>= 1.1.0), magrittr (>= 2.0.0), promises, reticulate, rmarkdown, testthat (>= 3.0.0)
requirements:
  build:
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-rlang >=0.4.12

  run:
    - r-base
    - r-rlang >=0.4.12

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('coro')"           # [not win]
    - "\"%R%\" -e \"library('coro')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://github.com/r-lib/coro
  license: MIT
  summary: Provides 'coroutines' for R, a family of functions that can be suspended and resumed
    later on. This includes 'async' functions (which await) and generators (which yield).
    'Async' functions are based on the concurrency framework of the 'promises' package.
    Generators are based on a dependency free iteration protocol defined in 'coro' and
    are compatible with iterators from the 'reticulate' package.
  license_family: MIT
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/MIT'
    - LICENSE

# The original CRAN metadata for this package was:

# Package: coro
# Title: 'Coroutines' for R
# Version: 1.0.3
# Authors@R: c( person("Lionel", "Henry", , "lionel@rstudio.com", role = c("aut", "cre")), person("RStudio", role = c("cph", "fnd")) )
# Description: Provides 'coroutines' for R, a family of functions that can be suspended and resumed later on. This includes 'async' functions (which await) and generators (which yield). 'Async' functions are based on the concurrency framework of the 'promises' package. Generators are based on a dependency free iteration protocol defined in 'coro' and are compatible with iterators from the 'reticulate' package.
# License: MIT + file LICENSE
# URL: https://github.com/r-lib/coro
# BugReports: https://github.com/r-lib/coro/issues
# Depends: R (>= 3.5.0)
# Imports: rlang (>= 0.4.12)
# Suggests: knitr, later (>= 1.1.0), magrittr (>= 2.0.0), promises, reticulate, rmarkdown, testthat (>= 3.0.0)
# VignetteBuilder: knitr
# Config/testthat/edition: 3
# Config/Needs/website: tidyverse/tidytemplate
# Encoding: UTF-8
# RoxygenNote: 7.2.0
# NeedsCompilation: no
# Packaged: 2022-07-19 14:58:24 UTC; lionel
# Author: Lionel Henry [aut, cre], RStudio [cph, fnd]
# Maintainer: Lionel Henry <lionel@rstudio.com>
# Repository: CRAN
# Date/Publication: 2022-07-19 15:30:02 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
