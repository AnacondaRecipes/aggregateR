{% set version = '1.9.1' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-ctrdata
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/ctrdata_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/ctrdata/ctrdata_{{ version }}.tar.gz
  sha256: 727eb1d4fcf9c9c6613c8c9ae2982f9e732bb9ec60855d7afe7e58f520c010fa

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip
  noarch: generic

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: devtools, knitr, rmarkdown, RSQLite (>= 2.2.4), mongolite, tinytest (>= 1.2.1), R.rsp
requirements:
  build:
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-clipr
    - r-curl
    - r-dplyr
    - r-httr
    - r-jsonlite
    - r-lubridate
    - r-nodbi >=0.7.0
    - r-rvest
    - r-stringi
    - r-xml2

  run:
    - r-base
    - r-clipr
    - r-curl
    - r-dplyr
    - r-httr
    - r-jsonlite
    - r-lubridate
    - r-nodbi >=0.7.0
    - r-rvest
    - r-stringi
    - r-xml2

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('ctrdata')"           # [not win]
    - "\"%R%\" -e \"library('ctrdata')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://cran.r-project.org/package=ctrdata
  license: MIT
  summary: A system for querying, retrieving and analyzing protocol- and results-related information
    on clinical trials from three public registers, the 'European Union Clinical Trials
    Register' ('EUCTR', <https://www.clinicaltrialsregister.eu/>), 'ClinicalTrials.gov'
    ('CTGOV', <https://clinicaltrials.gov/>) and the 'ISRCTN' (<http://www.isrctn.com/>).
    Trial information is downloaded, converted and stored in a database ('PostgreSQL',
    'SQLite' or 'MongoDB'; via package 'nodbi'). Functions are included to identify
    de-duplicated records, to easily find and extract variables (fields) of interest
    even from complex nesting as used by the registers, and to update previous queries.
    The package can be used for meta-analysis and trend-analysis of the design and conduct
    as well as for results of clinical trials.
  license_family: MIT
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/MIT'
    - LICENSE

extra:
  recipe-maintainers:
    - katietz

# The original CRAN metadata for this package was:

# Package: ctrdata
# Type: Package
# Title: Retrieve and Analyze Clinical Trials in Public Registers
# Version: 1.9.1
# Imports: jsonlite, httr, curl, clipr, xml2, rvest, nodbi (>= 0.7.0), stringi, dplyr, lubridate
# SystemRequirements: sed, php, cat, perl
# URL: https://cran.r-project.org/package=ctrdata
# BugReports: https://github.com/rfhb/ctrdata/issues
# Description: A system for querying, retrieving and analyzing protocol- and results-related information on clinical trials from three public registers, the 'European Union Clinical Trials Register' ('EUCTR', <https://www.clinicaltrialsregister.eu/>), 'ClinicalTrials.gov' ('CTGOV', <https://clinicaltrials.gov/>) and the 'ISRCTN' (<http://www.isrctn.com/>). Trial information is downloaded, converted and stored in a database ('PostgreSQL', 'SQLite' or 'MongoDB'; via package 'nodbi'). Functions are included to identify de-duplicated records, to easily find and extract variables (fields) of interest even from complex nesting as used by the registers, and to update previous queries. The package can be used for meta-analysis and trend-analysis of the design and conduct as well as for results of clinical trials.
# License: MIT + file LICENSE
# RoxygenNote: 7.1.2
# Suggests: devtools, knitr, rmarkdown, RSQLite (>= 2.2.4), mongolite, tinytest (>= 1.2.1), R.rsp
# VignetteBuilder: R.rsp
# NeedsCompilation: no
# Encoding: UTF-8
# Authors@R: person(given = "Ralf", family = "Herold", role = c("aut", "cre"), email = "ralf.herold@mailbox.org", comment = c(ORCID = "0000-0002-8148-6748"))
# Packaged: 2022-04-24 14:11:43 UTC; ralfherold
# Author: Ralf Herold [aut, cre] (<https://orcid.org/0000-0002-8148-6748>)
# Maintainer: Ralf Herold <ralf.herold@mailbox.org>
# Repository: CRAN
# Date/Publication: 2022-04-24 14:30:09 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
