{% set version = '0.9.12' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-fstcore
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/fstcore_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/fstcore/fstcore_{{ version }}.tar.gz
  sha256: 8f86e7cd4074cfda812c8e5dcf0f03a5d02d37795c16c7511e11e2262c32b5a8

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: testthat, lintr
requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{ compiler('cxx') }}            # [not win]
    - {{ compiler('m2w64_cxx') }}      # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}sed               # [win]
    - {{ posix }}grep              # [win]
    - {{ posix }}autoconf
    - {{ posix }}automake          # [not win]
    - {{ posix }}automake-wrapper  # [win]
    - {{ posix }}pkg-config
    - {{ posix }}make
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-rcpp

  run:
    - r-base
    - {{native}}gcc-libs         # [win]
    - r-rcpp

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('fstcore')"           # [not win]
    - "\"%R%\" -e \"library('fstcore')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://www.fstpackage.org/fstcore/
  license: MPL-2.0 | file LICENSE
  summary: The 'fstlib' library provides multithreaded serialization of compressed data frames
    using the 'fst' format. The 'fst' format allows for random access of stored data
    and compression with the 'LZ4' and 'ZSTD' compressors.
  license_family: OTHER
  license_file:
    - LICENSE

# The original CRAN metadata for this package was:

# Package: fstcore
# Type: Package
# Title: R Bindings to the 'Fstlib' Library
# Description: The 'fstlib' library provides multithreaded serialization of compressed data frames using the 'fst' format. The 'fst' format allows for random access of stored data and compression with the 'LZ4' and 'ZSTD' compressors.
# Version: 0.9.12
# Date: 2022-03-22
# Authors@R: c(person(given = "Mark", family = "Klik", role = c("aut", "cre", "cph"), email = "markklik@gmail.com", comment = "Mark Klik is author of the fstcore package and author and copyright holder of the bundled 'fstlib' code"), person(given = "Yuta", family = "Mori", role = c("ctb", "cph"), comment = "Yuta Mori is author and copyright holder of the bundled 'libdivsufsort-lite' code, part of 'ZSTD'"), person(given = "Przemyslaw", family = "Skibinski", role = c("ctb", "cph"), comment = "Przemyslaw Skibinski is author and copyright holder of the bundled price functions, part of 'ZSTD'"), person(given = "Tino", family = "Reichardt", role = c("ctb", "cph"), comment = "Tino Reichardt is author and copyright holder of bundled sources from the 'zstdmt' library, part of 'ZSTD'"), person(given = "Yann", family = "Collet", role = c("ctb", "cph"), comment = "Yann Collet is author of the bundled 'LZ4' and 'ZSTD' code and copyright holder of 'LZ4'"), person(given = "Facebook, Inc.", role = "cph", comment = "Bundled 'ZSTD' code"))
# Depends: R (>= 3.0.0)
# Imports: Rcpp
# LinkingTo: Rcpp
# SystemRequirements: little-endian platform
# RoxygenNote: 7.1.2
# Suggests: testthat, lintr
# License: MPL-2.0 | file LICENSE
# Encoding: UTF-8
# Copyright: This package includes sources from the LZ4 library owned by Yann Collet, sources of the ZSTD library owned by Facebook, Inc., sources of the libdivsufsort-lite library owned by Yuta Mori and sources of the fstlib library owned by Mark Klik
# URL: https://www.fstpackage.org/fstcore/
# BugReports: https://github.com/fstpackage/fst/issues
# NeedsCompilation: yes
# Packaged: 2022-03-22 16:03:24 UTC; Mark
# Author: Mark Klik [aut, cre, cph] (Mark Klik is author of the fstcore package and author and copyright holder of the bundled 'fstlib' code), Yuta Mori [ctb, cph] (Yuta Mori is author and copyright holder of the bundled 'libdivsufsort-lite' code, part of 'ZSTD'), Przemyslaw Skibinski [ctb, cph] (Przemyslaw Skibinski is author and copyright holder of the bundled price functions, part of 'ZSTD'), Tino Reichardt [ctb, cph] (Tino Reichardt is author and copyright holder of bundled sources from the 'zstdmt' library, part of 'ZSTD'), Yann Collet [ctb, cph] (Yann Collet is author of the bundled 'LZ4' and 'ZSTD' code and copyright holder of 'LZ4'), Facebook, Inc. [cph] (Bundled 'ZSTD' code)
# Maintainer: Mark Klik <markklik@gmail.com>
# Repository: CRAN
# Date/Publication: 2022-03-23 07:50:12 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
