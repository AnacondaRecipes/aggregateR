{% set version = '7.13.6' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-drake
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/drake_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/drake/drake_{{ version }}.tar.gz
  sha256: a2c1533b954a7a5b14a2fd2c585f2b1edc3e7569e744bd0c373f3e408580c6e2

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: abind, bindr, callr, cli (>= 1.1.0), clustermq (>= 0.9.1), crayon, curl (>= 2.7), data.table, datasets, disk.frame, downloader, fst, future (>= 1.3.0), ggplot2, ggraph, grDevices, keras, knitr, lubridate, networkD3, prettycode, progress (>= 1.2.2), qs (>= 0.20.2), Rcpp, rmarkdown, rstudioapi, stats, styler (>= 1.2.0), testthat (>= 2.1.0), tibble, txtplot, usethis, visNetwork (>= 2.0.9), webshot
requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}make
    - {{ posix }}sed               # [win]
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-base64url
    - r-digest >=0.6.21
    - r-igraph
    - r-rlang >=0.2.0
    - r-storr >=1.1.0
    - r-tidyselect >=1.0.0
    - r-txtq >=0.2.3
    - r-vctrs >=0.2.0

  run:
    - r-base
    - {{native}}gcc-libs         # [win]
    - r-base64url
    - r-digest >=0.6.21
    - r-igraph
    - r-rlang >=0.2.0
    - r-storr >=1.1.0
    - r-tidyselect >=1.0.0
    - r-txtq >=0.2.3
    - r-vctrs >=0.2.0

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('drake')"           # [not win]
    - "\"%R%\" -e \"library('drake')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://github.com/ropensci/drake, https://docs.ropensci.org/drake/, https://books.ropensci.org/drake/
  license: GPL-3
  summary: A general-purpose computational engine for data analysis, drake rebuilds intermediate
    data objects when their dependencies change, and it skips work when the results
    are already up to date.  Not every execution starts from scratch, there is native
    support for parallel and distributed computing, and completed projects have tangible
    evidence that they are reproducible.  Extensive documentation, from beginner-friendly
    tutorials to practical examples and more, is available at the reference website
    <https://docs.ropensci.org/drake/> and the online manual <https://books.ropensci.org/drake/>.
  license_family: GPL3
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-3'

# The original CRAN metadata for this package was:

# Package: drake
# Title: A Pipeline Toolkit for Reproducible Computation at Scale
# Version: 7.13.6
# Authors@R: c( person( given = c("William", "Michael"), family = "Landau", role = c("aut", "cre"), email = "will.landau.oss@gmail.com", comment = c(ORCID = "0000-0003-1878-3253") ), person( given = "Alex", family = "Axthelm", role = "ctb", email = "aaxthelm@che.IN.gov" ), person( given = "Jasper", family = "Clarkberg", role = "ctb", email = "jasper@clarkberg.org" ), person( given = "Kirill", family = "Muller", role = "ctb", email = "kirill@cynkra.com" ), person( given = "Ben", family = "Bond-Lamberty", role = "ctb", email = "bondlamberty@pnnl.gov", comment = c(ORCID = "0000-0001-9525-4633") ), person( given = "Tristan", family = "Mahr", role = "ctb", email = "tristan.mahr@wisc.edu", comment = c(ORCID = "0000-0002-8890-5116") ), person( given = "Miles", family = "McBain", role = "ctb", email = "miles.mcbain@gmail.com", comment = c(ORCID = "0000-0003-2865-2548") ), person( given = "Noam", family = "Ross", role = "ctb", email = "noam.ross@gmail.com", comment = c(ORCID = "0000-0002-2136-0000") ), person( given = "Ellis", family = "Hughes", role = "ctb", email = "ellishughes@live.com" ), person( given = c("Matthew", "Mark"), family = "Strasiotto", role = "ctb", email = c( "matthew.strasiotto@gmail.com", "mstr3336@uni.sydney.edu.au" ) ), person( given = "Ben", family = "Marwick", role = "rev", email = "bmarwick@uw.edu" ), person( given = "Peter", family = "Slaughter", role = "rev", email = "slaughter@nceas.ucsb.edu" ), person( family = "Eli Lilly and Company", role = "cph" ))
# Description: A general-purpose computational engine for data analysis, drake rebuilds intermediate data objects when their dependencies change, and it skips work when the results are already up to date.  Not every execution starts from scratch, there is native support for parallel and distributed computing, and completed projects have tangible evidence that they are reproducible.  Extensive documentation, from beginner-friendly tutorials to practical examples and more, is available at the reference website <https://docs.ropensci.org/drake/> and the online manual <https://books.ropensci.org/drake/>.
# License: GPL-3
# URL: https://github.com/ropensci/drake, https://docs.ropensci.org/drake/, https://books.ropensci.org/drake/
# BugReports: https://github.com/ropensci/drake/issues
# Depends: R (>= 3.3.0)
# Imports: base64url, digest (>= 0.6.21), igraph, methods, parallel, rlang (>= 0.2.0), storr (>= 1.1.0), tidyselect (>= 1.0.0), txtq (>= 0.2.3), utils, vctrs (>= 0.2.0)
# Suggests: abind, bindr, callr, cli (>= 1.1.0), clustermq (>= 0.9.1), crayon, curl (>= 2.7), data.table, datasets, disk.frame, downloader, fst, future (>= 1.3.0), ggplot2, ggraph, grDevices, keras, knitr, lubridate, networkD3, prettycode, progress (>= 1.2.2), qs (>= 0.20.2), Rcpp, rmarkdown, rstudioapi, stats, styler (>= 1.2.0), testthat (>= 2.1.0), tibble, txtplot, usethis, visNetwork (>= 2.0.9), webshot
# Encoding: UTF-8
# Language: en-US
# RoxygenNote: 7.2.3
# NeedsCompilation: yes
# Packaged: 2023-10-17 13:59:42 UTC; C240390
# Author: William Michael Landau [aut, cre] (<https://orcid.org/0000-0003-1878-3253>), Alex Axthelm [ctb], Jasper Clarkberg [ctb], Kirill Muller [ctb], Ben Bond-Lamberty [ctb] (<https://orcid.org/0000-0001-9525-4633>), Tristan Mahr [ctb] (<https://orcid.org/0000-0002-8890-5116>), Miles McBain [ctb] (<https://orcid.org/0000-0003-2865-2548>), Noam Ross [ctb] (<https://orcid.org/0000-0002-2136-0000>), Ellis Hughes [ctb], Matthew Mark Strasiotto [ctb], Ben Marwick [rev], Peter Slaughter [rev], Eli Lilly and Company [cph]
# Maintainer: William Michael Landau <will.landau.oss@gmail.com>
# Repository: CRAN
# Date/Publication: 2023-10-17 22:30:10 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
