{% set version = '1.5' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-genlasso
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/genlasso_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/genlasso/genlasso_{{ version }}.tar.gz
  sha256: de1cfe83a5e851f41a0de55ebf58980c849ffbf978751c401fcdc767377ec01d

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}make
    - {{ posix }}sed               # [win]
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-matrix
    - r-igraph

  run:
    - r-base
    - {{native}}gcc-libs         # [win]
    - r-matrix
    - r-igraph

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('genlasso')"           # [not win]
    - "\"%R%\" -e \"library('genlasso')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://github.com/glmgen/genlasso
  license: GPL (>= 2.0)
  summary: Computes the solution path for generalized lasso problems. Important use cases are
    the fused lasso over an arbitrary graph, and trend fitting of any given polynomial
    order. Specialized implementations for the latter two subproblems are given to improve
    stability and speed.
  license_family: GPL3

extra:
  recipe-maintainers:
    - katietz

# The original CRAN metadata for this package was:

# Package: genlasso
# Type: Package
# Title: Path Algorithm for Generalized Lasso Problems
# Version: 1.5
# Date: 2020-07-01
# Author: Taylor B. Arnold and Ryan J. Tibshirani
# Maintainer: Taylor Arnold <taylor.arnold@acm.org>
# Description: Computes the solution path for generalized lasso problems. Important use cases are the fused lasso over an arbitrary graph, and trend fitting of any given polynomial order. Specialized implementations for the latter two subproblems are given to improve stability and speed.
# License: GPL (>= 2.0)
# Depends: Matrix, igraph, R (>= 3.1.0)
# ByteCompile: TRUE
# URL: https://github.com/glmgen/genlasso
# NeedsCompilation: yes
# Packaged: 2020-07-01 07:46:23 UTC; admin
# Repository: CRAN
# Date/Publication: 2020-07-02 11:20:10 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
