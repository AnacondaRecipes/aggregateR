{% set version = '2.4.0' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-buysetest
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/BuyseTest_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/BuyseTest/BuyseTest_{{ version }}.tar.gz
  sha256: 36568ee19960d62ba684fdaebf317a5d05499e9c37524c2969031cf616ec8567

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: cvAUC, mvtnorm, pbapply, pROC, R.rsp, survival, testthat
requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{ compiler('cxx') }}            # [not win]
    - {{ compiler('m2w64_cxx') }}      # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}make
    - {{ posix }}sed               # [win]
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-rcpp
    - r-rcpparmadillo
    - r-data.table
    - r-doparallel
    - r-foreach
    - r-ggplot2
    - r-lava
    - r-prodlim
    - r-riskregression
    - r-rlang

  run:
    - r-base
    - {{native}}gcc-libs         # [win]
    - r-rcpp
    - r-rcpparmadillo
    - r-data.table
    - r-doparallel
    - r-foreach
    - r-ggplot2
    - r-lava
    - r-prodlim
    - r-riskregression
    - r-rlang

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('BuyseTest')"           # [not win]
    - "\"%R%\" -e \"library('BuyseTest')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://github.com/bozenne/BuyseTest
  license: GPL-3
  summary: Implementation of the Generalized Pairwise Comparisons (GPC) as defined in Buyse (2010)
    <doi:10.1002/sim.3923> for complete observations, and extended in Peron (2018) <doi:10.1177/0962280216658320>
    to deal with right-censoring. GPC compare two groups of observations (intervention
    vs. control group) regarding several prioritized endpoints to estimate the probability
    that a random observation drawn from one group performs better than a random observation
    drawn from the other group (Mann-Whitney parameter). The net benefit and win ratio
    statistics, i.e. the difference and ratio between the probabilities relative to
    the intervention and control groups, can then also be estimated. Confidence intervals
    and p-values are obtained based on asymptotic results (Ozenne 2021 <doi:10.1177/09622802211037067>),
    non-parametric bootstrap, or permutations. The software enables the use of thresholds
    of minimal importance difference, stratification, non-prioritized endpoints (O Brien
    test), and can handle right-censoring and competing-risks.
  license_family: GPL3
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-3'

extra:
  recipe-maintainers:
    - katietz

# The original CRAN metadata for this package was:

# Package: BuyseTest
# Type: Package
# Title: Generalized Pairwise Comparisons
# Version: 2.4.0
# Date: 2023-03-20
# Authors@R: c( person("Brice", "Ozenne", role = c("aut", "cre"), email = "brice.mh.ozenne@gmail.com", comment = c(ORCID = "0000-0001-9694-2956")), person("Julien", "Peron", role = "ctb"), person("Eva", "Cantagallo", role = "aut") )
# Description: Implementation of the Generalized Pairwise Comparisons (GPC) as defined in Buyse (2010) <doi:10.1002/sim.3923> for complete observations, and extended in Peron (2018) <doi:10.1177/0962280216658320> to deal with right-censoring. GPC compare two groups of observations (intervention vs. control group) regarding several prioritized endpoints to estimate the probability that a random observation drawn from one group performs better than a random observation drawn from the other group (Mann-Whitney parameter). The net benefit and win ratio statistics, i.e. the difference and ratio between the probabilities relative to the intervention and control groups, can then also be estimated. Confidence intervals and p-values are obtained based on asymptotic results (Ozenne 2021 <doi:10.1177/09622802211037067>), non-parametric bootstrap, or permutations. The software enables the use of thresholds of minimal importance difference, stratification, non-prioritized endpoints (O Brien test), and can handle right-censoring and competing-risks.
# License: GPL-3
# Encoding: UTF-8
# URL: https://github.com/bozenne/BuyseTest
# BugReports: https://github.com/bozenne/BuyseTest/issues
# Depends: R (>= 2.10), Rcpp
# Imports: data.table, doParallel, foreach, ggplot2, methods, lava, parallel, prodlim, riskRegression, rlang, stats, stats4, utils
# Suggests: cvAUC, mvtnorm, pbapply, pROC, R.rsp, survival, testthat
# LinkingTo: Rcpp, RcppArmadillo
# VignetteBuilder: R.rsp
# NeedsCompilation: yes
# RoxygenNote: 7.2.1
# Collate: '0-onLoad.R' '1-setGeneric.R' 'BuyseMultComp.R' 'BuyseTTEM.R' 'BuyseTest-Peron.R' 'BuyseTest-check.R' 'BuyseTest-inference.R' 'BuyseTest-initialization.R' 'BuyseTest-package.R' 'BuyseTest-print.R' 'BuyseTest.R' 'BuyseTest.options.R' 'PairScore.R' 'RcppExports.R' 'S4-BuysePower.R' 'S4-BuysePower-summary.R' 'S4-BuysePower-show.R' 'S4-BuyseTest.R' 'S4-BuyseTest-coef.R' 'S4-BuyseTest-confint.R' 'S4-BuyseTest-get.R' 'S4-BuyseTest-sensitivity.R' 'S4-BuyseTest-summary.R' 'S4-BuyseTest-show.R' 'S4-BuyseTest.options.R' 'as.data.table.performance.R' 'auc.R' 'autoplot.sensitivity.R' 'brier.R' 'constStrata.R' 'discreteRoot.R' 'iid.prodlim.R' 'normexp.R' 'performance.R' 'performanceResample.R' 'powerBuyseTest.R' 'predict.logit.R' 'rbind.performanceResample.R' 'simBuyseTest.R' 'simCompetingRisks.R' 'summary.performance.R' 'valid.R'
# Packaged: 2023-03-20 22:09:19 UTC; bozenne
# Author: Brice Ozenne [aut, cre] (<https://orcid.org/0000-0001-9694-2956>), Julien Peron [ctb], Eva Cantagallo [aut]
# Maintainer: Brice Ozenne <brice.mh.ozenne@gmail.com>
# Repository: CRAN
# Date/Publication: 2023-03-20 22:30:02 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
