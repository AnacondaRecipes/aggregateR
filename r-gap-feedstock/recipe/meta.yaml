{% set version = '1.2.3-6' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-gap
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/gap_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/gap/gap_{{ version }}.tar.gz
  sha256: 0ef352aa98a3bf27908b256f27a903058502176ea9112a4ffc41928ebbc48c22

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: BradleyTerry2, MASS, Matrix, MCMCglmm, R2jags, bdsmatrix, calibrate, circlize, coda, cowplot, coxme, foreign, forestplot, genetics, grid, haplo.stats, htmlwidgets, jsonlite, kinship2, knitr, lattice, magic, matrixStats, meta, metafor, mets, nlme, pedigree, pedigreemm, plotrix, reshape, rmarkdown, rmeta, rms, survival
requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{ compiler('fortran') }}        # [not win]
    - {{ compiler('m2w64_fortran') }}  # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}make
    - {{ posix }}sed               # [win]
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-dplyr
    - r-gap.datasets
    - r-ggplot2
    - r-plotly

  run:
    - r-base
    - {{native}}gcc-libs         # [win]
    - r-dplyr
    - r-gap.datasets
    - r-ggplot2
    - r-plotly

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('gap')"           # [not win]
    - "\"%R%\" -e \"library('gap')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://github.com/jinghuazhao/R
  license: GPL-2
  summary: 'As first reported [Zhao, J. H. 2007. "gap: Genetic Analysis Package". J Stat Soft
    23(8):1-18. <doi:10.18637/jss.v023.i08>], it is designed as an integrated package
    for genetic data analysis of both population and family data. Currently, it contains
    functions for sample size calculations of both population-based and family-based
    designs, probability of familial disease aggregation, kinship calculation, statistics
    in linkage analysis, and association analysis involving genetic markers including
    haplotype analysis with or without environmental covariates. Over years, the package
    has been developed in-between many projects hence also in line with the name (gap).'
  license_family: GPL2
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-2'

extra:
  recipe-maintainers:
    - katietz

# The original CRAN metadata for this package was:

# Package: gap
# Version: 1.2.3-6
# Date: 2022-5-10
# Title: Genetic Analysis Package
# Authors@R: c(person("Jing Hua", "Zhao", role = c("aut", "cre"), email = "jinghuazhao@hotmail.com", comment = c(ORCID = "0000-0002-1463-5870", "0000-0003-4930-3582")), person("Kurt", "Hornik", role = "ctb"), person("Brian", "Ripley", role = "ctb"), person("Uwe", "Liggs", role = "ctb") )
# URL: https://github.com/jinghuazhao/R
# BugReports: https://github.com/jinghuazhao/R/issues
# Depends: R (>= 2.10), gap.datasets
# Imports: dplyr, ggplot2, plotly
# Suggests: BradleyTerry2, MASS, Matrix, MCMCglmm, R2jags, bdsmatrix, calibrate, circlize, coda, cowplot, coxme, foreign, forestplot, genetics, grid, haplo.stats, htmlwidgets, jsonlite, kinship2, knitr, lattice, magic, matrixStats, meta, metafor, mets, nlme, pedigree, pedigreemm, plotrix, reshape, rmarkdown, rmeta, rms, survival
# VignetteBuilder: knitr
# Enhances: shiny
# Description: As first reported [Zhao, J. H. 2007. "gap: Genetic Analysis Package". J Stat Soft 23(8):1-18. <doi:10.18637/jss.v023.i08>], it is designed as an integrated package for genetic data analysis of both population and family data. Currently, it contains functions for sample size calculations of both population-based and family-based designs, probability of familial disease aggregation, kinship calculation, statistics in linkage analysis, and association analysis involving genetic markers including haplotype analysis with or without environmental covariates. Over years, the package has been developed in-between many projects hence also in line with the name (gap).
# License: GPL (>= 2)
# LazyData: Yes
# LazyLoad: Yes
# NeedsCompilation: yes
# Repository: CRAN
# Encoding: UTF-8
# Packaged: 2022-05-10 08:57:58 UTC; jhz22
# Date/Publication: 2022-05-13 22:10:02 UTC
# RoxygenNote: 7.1.2
# Author: Jing Hua Zhao [aut, cre] (<https://orcid.org/0000-0002-1463-5870>, 0000-0003-4930-3582), Kurt Hornik [ctb], Brian Ripley [ctb], Uwe Liggs [ctb]
# Maintainer: Jing Hua Zhao <jinghuazhao@hotmail.com>

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
