{% set version = '0.4.11' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-popepi
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/popEpi_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/popEpi/popEpi_{{ version }}.tar.gz
  sha256: af0fb2786839ff5392474dacc393349ab6b930c84ad579f019c5b45812df0710

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip
  noarch: generic

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: covr, date, knitr, mstate, relsurv, rmarkdown, roxygen2, testthat
requirements:
  build:
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-epi >=2.0
    - r-data.table >=1.10.4
    - r-survival

  run:
    - r-base
    - r-epi >=2.0
    - r-data.table >=1.10.4
    - r-survival

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('popEpi')"           # [not win]
    - "\"%R%\" -e \"library('popEpi')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://github.com/FinnishCancerRegistry/popEpi
  license: MIT
  summary: 'Enables computation of epidemiological statistics, including those where counts or
    mortality rates of the reference population are used.  Currently supported: excess
    hazard models (Dickman, Sloggett, Hills, and Hakulinen (2012) <doi:10.1002/sim.1597>),
    rates, mean survival times, relative/net survival (in particular the Ederer II (Ederer
    and Heise (1959)) and Pohar Perme (Pohar Perme, Stare, and Esteve (2012) <doi:10.1111/j.1541-0420.2011.01640.x>)
    estimators), and standardized incidence and mortality ratios, all of which can be
    easily adjusted for by covariates such as age. Fast splitting and aggregation of
    ''Lexis'' objects (from package ''Epi'') and other computations achieved using ''data.table''.'
  license_family: MIT
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/MIT'
    - LICENSE

# The original CRAN metadata for this package was:

# Package: popEpi
# Title: Functions for Epidemiological Analysis using Population Data
# Version: 0.4.11
# Authors@R: c( person("Joonas", "Miettinen", , "joonas.miettinen@cancer.fi", role = c("cre", "aut"), comment = c(ORCID = "0000-0001-8624-6754")), person("Matti", "Rantanen", , "matti.rantanen@statfinn.com", role = "aut"), person("Karri", "Seppa", , "karri.seppa@cancer.fi", role = "ctb") )
# Author: Joonas Miettinen [cre, aut] (<https://orcid.org/0000-0001-8624-6754>), Matti Rantanen [aut], Karri Seppa [ctb]
# Maintainer: Joonas Miettinen <joonas.miettinen@cancer.fi>
# Description: Enables computation of epidemiological statistics, including those where counts or mortality rates of the reference population are used.  Currently supported: excess hazard models (Dickman, Sloggett, Hills, and Hakulinen (2012) <doi:10.1002/sim.1597>), rates, mean survival times, relative/net survival (in particular the Ederer II (Ederer and Heise (1959)) and Pohar Perme (Pohar Perme, Stare, and Esteve (2012) <doi:10.1111/j.1541-0420.2011.01640.x>) estimators), and standardized incidence and mortality ratios, all of which can be easily adjusted for by covariates such as age. Fast splitting and aggregation of 'Lexis' objects (from package 'Epi') and other computations achieved using 'data.table'.
# License: MIT + file LICENSE
# URL: https://github.com/FinnishCancerRegistry/popEpi
# BugReports: https://github.com/FinnishCancerRegistry/popEpi/issues
# Depends: R (>= 3.2.0)
# Imports: data.table (>= 1.10.4), Epi (>= 2.0), splines, survival
# Suggests: covr, date, knitr, mstate, relsurv, rmarkdown, roxygen2, testthat
# VignetteBuilder: knitr
# ByteCompile: true
# Encoding: UTF-8
# Language: en-GB
# LazyData: true
# RoxygenNote: 7.2.3
# NeedsCompilation: no
# Packaged: 2023-08-23 07:41:40 UTC; joonas.miettinen
# Repository: CRAN
# Date/Publication: 2023-08-23 14:30:02 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
