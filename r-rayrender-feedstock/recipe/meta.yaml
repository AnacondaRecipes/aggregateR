{% set version = '0.29.6' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-rayrender
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/rayrender_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/rayrender/rayrender_{{ version }}.tar.gz
  sha256: 2c2d8b6b6b4d9f29d1dc117235923d8358339c83db01791acf1d609a548910a6

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: sf, spData, dplyr, Rvcg, testthat (>= 3.0.0)
requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{ compiler('cxx') }}            # [not win]
    - {{ compiler('m2w64_cxx') }}      # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}sed               # [win]
    - {{ posix }}grep              # [win]
    - {{ posix }}autoconf
    - {{ posix }}automake          # [not win]
    - {{ posix }}automake-wrapper  # [win]
    - {{ posix }}pkg-config
    - {{ posix }}make
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-rcpp >=1.0.0
    - r-rcppthread
    - r-decido
    - r-magrittr
    - r-png
    - r-progress
    - r-purrr
    - r-raster
    - r-rayimage >=0.9.0
    - r-spacefillr >=0.3.0

  run:
    - r-base
    - {{native}}gcc-libs         # [win]
    - r-rcpp >=1.0.0
    - r-rcppthread
    - r-decido
    - r-magrittr
    - r-png
    - r-progress
    - r-purrr
    - r-raster
    - r-rayimage >=0.9.0
    - r-spacefillr >=0.3.0

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('rayrender')"           # [not win]
    - "\"%R%\" -e \"library('rayrender')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://www.rayrender.net, https://github.com/tylermorganwall/rayrender
  license: GPL-3
  summary: Render scenes using pathtracing. Build 3D scenes out of spheres, cubes, planes, disks,
    triangles, cones, curves, line segments, cylinders, ellipsoids, and 3D models in
    the 'Wavefront' OBJ file format or the PLY Polygon File Format. Supports several
    material types, textures, multicore rendering, and tone-mapping. Based on the "Ray
    Tracing in One Weekend" book series. Peter Shirley (2018) <https://raytracing.github.io>.
  license_family: GPL3
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-3'

# The original CRAN metadata for this package was:

# Package: rayrender
# Type: Package
# Title: Build and Raytrace 3D Scenes
# Version: 0.29.6
# Date: 2023-05-17
# Authors@R: c(person("Tyler", "Morgan-Wall", email = "tylermw@gmail.com", role = c("aut", "cph", "cre"), comment = c(ORCID = "0000-0002-3131-3814")), person("Syoyo", "Fujita", role=c("ctb", "cph")), person("Melissa", "O'Neill", email = "oneill@pcg-random.org", role = c("ctb", "cph")), person("Vilya", "Harvey", role = c("ctb", "cph")))
# Maintainer: Tyler Morgan-Wall <tylermw@gmail.com>
# Description: Render scenes using pathtracing. Build 3D scenes out of spheres, cubes, planes, disks, triangles, cones, curves, line segments, cylinders, ellipsoids, and 3D models in the 'Wavefront' OBJ file format or the PLY Polygon File Format. Supports several material types, textures, multicore rendering, and tone-mapping. Based on the "Ray Tracing in One Weekend" book series. Peter Shirley (2018) <https://raytracing.github.io>.
# License: GPL-3
# Copyright: file inst/COPYRIGHTS
# Depends: R (>= 3.0.2)
# Imports: Rcpp (>= 1.0.0), parallel, magrittr, purrr, png, raster, decido, rayimage (>= 0.9.0), stats, progress
# Suggests: sf, spData, dplyr, Rvcg, testthat (>= 3.0.0)
# LinkingTo: Rcpp, RcppThread, progress, spacefillr (>= 0.3.0)
# URL: https://www.rayrender.net, https://github.com/tylermorganwall/rayrender
# RoxygenNote: 7.2.3
# SystemRequirements: C++17
# Biarch: true
# Encoding: UTF-8
# NeedsCompilation: yes
# Packaged: 2023-06-08 00:46:20 UTC; tyler
# Author: Tyler Morgan-Wall [aut, cph, cre] (<https://orcid.org/0000-0002-3131-3814>), Syoyo Fujita [ctb, cph], Melissa O'Neill [ctb, cph], Vilya Harvey [ctb, cph]
# Repository: CRAN
# Date/Publication: 2023-06-08 04:40:02 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
