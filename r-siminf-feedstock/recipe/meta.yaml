{% set version = '9.5.0' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-siminf
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/SimInf_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/SimInf/SimInf_{{ version }}.tar.gz
  sha256: b49054ac8fee12afd4803e4a5b507866cdabff8536e712ed7c1d2a85c3deca1f

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: knitr, rmarkdown
requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}sed               # [win]
    - {{ posix }}grep              # [win]
    - {{ posix }}autoconf
    - {{ posix }}automake          # [not win]
    - {{ posix }}automake-wrapper  # [win]
    - {{ posix }}pkg-config
    - {{ posix }}make
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-mass
    - r-matrix >=1.3_0
    - r-digest
    - gsl

  run:
    - r-base
    - {{native}}gcc-libs         # [win]
    - r-mass
    - r-matrix >=1.3_0
    - r-digest
    - gsl

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('SimInf')"           # [not win]
    - "\"%R%\" -e \"library('SimInf')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://github.com/stewid/SimInf
  license: GPL-3
  summary: Provides an efficient and very flexible framework to conduct data-driven epidemiological
    modeling in realistic large scale disease spread simulations. The framework integrates
    infection dynamics in subpopulations as continuous-time Markov chains using the
    Gillespie stochastic simulation algorithm and incorporates available data such as
    births, deaths and movements as scheduled events at predefined time-points. Using
    C code for the numerical solvers and 'OpenMP' (if available) to divide work over
    multiple processors ensures high performance when simulating a sample outcome. One
    of our design goals was to make the package extendable and enable usage of the numerical
    solvers from other R extension packages in order to facilitate complex epidemiological
    research. The package contains template models and can be extended with user-defined
    models. For more details see the paper by Widgren, Bauer, Eriksson and Engblom (2019)
    <doi:10.18637/jss.v091.i12>. The package also provides functionality to fit models
    to time series data using the Approximate Bayesian Computation Sequential Monte
    Carlo ('ABC-SMC') algorithm of Toni and others (2009) <doi:10.1098/rsif.2008.0172>.
  license_family: GPL3
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-3'

extra:
  recipe-maintainers:
    - katietz

# The original CRAN metadata for this package was:

# Package: SimInf
# Title: A Framework for Data-Driven Stochastic Disease Spread Simulations
# Version: 9.5.0
# Authors@R: c(person("Stefan", "Widgren", role = c("aut", "cre"), email = "stefan.widgren@gmail.com", comment = c(ORCID = "0000-0001-5745-2284")), person("Robin", "Eriksson", role = "aut", comment = c(ORCID = "0000-0002-4291-712X")), person("Stefan", "Engblom", role = "aut", comment = c(ORCID = "0000-0002-3614-1732")), person("Pavol", "Bauer", role = "aut", comment = c(ORCID = "0000-0003-4328-7171")), person("Thomas", "Rosendal", role = "ctb", comment = c(ORCID = "0000-0002-6576-9668")), person("Ivana", "Rodriguez Ewerlof", role = "ctb", comment = c(ORCID = "0000-0002-9678-9813")), person("Attractive Chaos", role = "cph", comment = "Author of 'kvec.h'."))
# Description: Provides an efficient and very flexible framework to conduct data-driven epidemiological modeling in realistic large scale disease spread simulations. The framework integrates infection dynamics in subpopulations as continuous-time Markov chains using the Gillespie stochastic simulation algorithm and incorporates available data such as births, deaths and movements as scheduled events at predefined time-points. Using C code for the numerical solvers and 'OpenMP' (if available) to divide work over multiple processors ensures high performance when simulating a sample outcome. One of our design goals was to make the package extendable and enable usage of the numerical solvers from other R extension packages in order to facilitate complex epidemiological research. The package contains template models and can be extended with user-defined models. For more details see the paper by Widgren, Bauer, Eriksson and Engblom (2019) <doi:10.18637/jss.v091.i12>. The package also provides functionality to fit models to time series data using the Approximate Bayesian Computation Sequential Monte Carlo ('ABC-SMC') algorithm of Toni and others (2009) <doi:10.1098/rsif.2008.0172>.
# Acknowledgements: This software has been made possible by support from the Swedish Research Council within the UPMARC Linnaeus center of Excellence (Pavol Bauer, Robin Eriksson, and Stefan Engblom), the Swedish Research Council Formas (Stefan Engblom and Stefan Widgren), the Swedish Board of Agriculture (Stefan Widgren), the Swedish strategic research program eSSENCE (Stefan Widgren), and in the framework of the Full Force project, supported by funding from the European Unions Horizon 2020 Research and Innovation programme under grant agreement No 773830: One Health European Joint Programme (Stefan Widgren).
# License: GPL-3
# URL: https://github.com/stewid/SimInf
# BugReports: https://github.com/stewid/SimInf/issues
# Type: Package
# LazyData: true
# Biarch: true
# NeedsCompilation: yes
# SystemRequirements: GNU Scientific Library (GSL)
# Depends: R (>= 4.0)
# Imports: digest, graphics, grDevices, MASS, methods, stats, utils, Matrix (>= 1.3-0)
# Suggests: knitr, rmarkdown
# Collate: 'C-generator.R' 'check_arguments.R' 'init.R' 'valid.R' 'classes.R' 'SimInf_model.R' 'SEIR.R' 'SIR.R' 'SIS.R' 'SISe.R' 'SISe3.R' 'SISe3_sp.R' 'SISe_sp.R' 'SimInf.R' 'SimInf_events.R' 'run.R' 'density_ratio.R' 'abc.R' 'degree.R' 'distance.R' 'distributions.R' 'match_compartments.R' 'mparse.R' 'n.R' 'openmp.R' 'package_skeleton.R' 'pfilter.R' 'plot.R' 'prevalence.R' 'print.R' 'punchcard.R' 'trajectory.R' 'u0.R' 'v0.R'
# Encoding: UTF-8
# RoxygenNote: 7.2.1
# VignetteBuilder: utils, knitr
# Packaged: 2023-01-23 07:10:33 UTC; stefan
# Author: Stefan Widgren [aut, cre] (<https://orcid.org/0000-0001-5745-2284>), Robin Eriksson [aut] (<https://orcid.org/0000-0002-4291-712X>), Stefan Engblom [aut] (<https://orcid.org/0000-0002-3614-1732>), Pavol Bauer [aut] (<https://orcid.org/0000-0003-4328-7171>), Thomas Rosendal [ctb] (<https://orcid.org/0000-0002-6576-9668>), Ivana Rodriguez Ewerlof [ctb] (<https://orcid.org/0000-0002-9678-9813>), Attractive Chaos [cph] (Author of 'kvec.h'.)
# Maintainer: Stefan Widgren <stefan.widgren@gmail.com>
# Repository: CRAN
# Date/Publication: 2023-01-23 08:50:02 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
