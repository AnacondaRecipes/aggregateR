{% set version = '1.0-0' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-rmsb
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/rmsb_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/rmsb/rmsb_{{ version }}.tar.gz
  sha256: 50a3abd3fb26ba58f0bdb0a34eb60065d7deb1a361a6f1fe4342bcdfd2cefc73

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: cmdstanr, bayesplot, mice
requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{ compiler('cxx') }}            # [not win]
    - {{ compiler('m2w64_cxx') }}      # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}sed               # [win]
    - {{ posix }}grep              # [win]
    - {{ posix }}autoconf
    - {{ posix }}automake          # [not win]
    - {{ posix }}automake-wrapper  # [win]
    - {{ posix }}pkg-config
    - {{ posix }}make
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-bh >=1.66.0
    - r-hmisc >=4.3_0
    - r-mass
    - r-rcpp >=0.12.0
    - r-rcppeigen >=0.3.3.3.0
    - r-rcppparallel >=5.0.1
    - r-stanheaders >=2.18.0
    - r-cluster
    - r-digest
    - r-ggplot2
    - r-knitr
    - r-loo
    - r-rms >=6.7_1
    - r-rstan >=2.26.23
    - r-survival >=3.1_12
    - r-rstantools
  run:
    - r-base
    - {{native}}gcc-libs         # [win]
    - r-bh >=1.66.0
    - r-hmisc >=4.3_0
    - r-mass
    - r-rcpp >=0.12.0
    - r-rcppeigen >=0.3.3.3.0
    - r-rcppparallel >=5.0.1
    - r-stanheaders >=2.18.0
    - r-cluster
    - r-digest
    - r-ggplot2
    - r-knitr
    - r-loo
    - r-rms >=6.7_1
    - r-rstan >=2.26.23
    - r-survival >=3.1_12
    - r-rstantools

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('rmsb')"           # [not win]
    - "\"%R%\" -e \"library('rmsb')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://hbiostat.org/R/rmsb/
  license: GPL-3
  summary: A Bayesian companion to the 'rms' package, 'rmsb' provides Bayesian model fitting,
    post-fit estimation, and graphics.  It implements Bayesian regression models whose
    fit objects can be processed by 'rms' functions such as 'contrast()', 'summary()',
    'Predict()', 'nomogram()', and 'latex()'.  The fitting function currently implemented
    in the package is 'blrm()' for Bayesian logistic binary and ordinal regression with
    optional clustering, censoring, and departures from the proportional odds assumption
    using the partial proportional odds model of Peterson and Harrell (1990) <https://www.jstor.org/stable/2347760>.
  license_family: GPL3
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-3'

# The original CRAN metadata for this package was:

# Package: rmsb
# Title: Bayesian Regression Modeling Strategies
# Version: 1.0-0
# Date: 2023-09-26
# Authors@R: c(person(given = "Frank", family = "Harrell", role = c("aut", "cre"), email = "fh@fharrell.com", comment = c(ORCID = "0000-0002-8271-5493")), person(given = "Ben", family = "Goodrich", role = "ctb", email = "benjamin.goodrich@columbia.edu", comment = "contributed Stan code"), person(given = "Ben", family = "Bolker", role = "ctb", comment = "wrote original code that is folded into the pdensityContour function"), person(given = "Doug", family = "Bates", role = "ctb", comment = "write original code for highest posterior density interval that is folded into the HPDint function"))
# Description: A Bayesian companion to the 'rms' package, 'rmsb' provides Bayesian model fitting, post-fit estimation, and graphics.  It implements Bayesian regression models whose fit objects can be processed by 'rms' functions such as 'contrast()', 'summary()', 'Predict()', 'nomogram()', and 'latex()'.  The fitting function currently implemented in the package is 'blrm()' for Bayesian logistic binary and ordinal regression with optional clustering, censoring, and departures from the proportional odds assumption using the partial proportional odds model of Peterson and Harrell (1990) <https://www.jstor.org/stable/2347760>.
# License: GPL (>= 3)
# Encoding: UTF-8
# URL: https://hbiostat.org/R/rmsb/
# RoxygenNote: 7.2.3
# Biarch: true
# Depends: R (>= 3.4.0), rms (>= 6.7-1)
# Imports: methods, Rcpp (>= 0.12.0), rstan (>= 2.26.23), Hmisc (>= 4.3-0), survival (>= 3.1-12), ggplot2, MASS, cluster, digest, knitr, loo
# LinkingTo: BH (>= 1.66.0), Rcpp (>= 0.12.0), RcppEigen (>= 0.3.3.3.0), RcppParallel (>= 5.0.1), rstan (>= 2.18.1), StanHeaders (>= 2.18.0)
# Suggests: cmdstanr, bayesplot, mice
# Additional_repositories: https://mc-stan.org/r-packages/
# SystemRequirements: GNU make
# NeedsCompilation: yes
# Packaged: 2023-09-26 12:15:34 UTC; harrelfe
# Author: Frank Harrell [aut, cre] (<https://orcid.org/0000-0002-8271-5493>), Ben Goodrich [ctb] (contributed Stan code), Ben Bolker [ctb] (wrote original code that is folded into the pdensityContour function), Doug Bates [ctb] (write original code for highest posterior density interval that is folded into the HPDint function)
# Maintainer: Frank Harrell <fh@fharrell.com>
# Repository: CRAN
# Date/Publication: 2023-09-26 13:10:02 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
