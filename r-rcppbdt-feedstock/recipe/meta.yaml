{% set version = '0.2.5' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-rcppbdt
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/RcppBDT_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/RcppBDT/RcppBDT_{{ version }}.tar.gz
  sha256: befb7595b5439420e1b3c3876dd29e6d53b6cb2a6ccf30fff3be7cd622cda6fb

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{ compiler('cxx') }}            # [not win]
    - {{ compiler('m2w64_cxx') }}      # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}make
    - {{ posix }}sed               # [win]
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-bh
    - r-rcpp

  run:
    - r-base
    - {{native}}gcc-libs         # [win]
    - r-bh
    - r-rcpp

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('RcppBDT')"           # [not win]
    - "\"%R%\" -e \"library('RcppBDT')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://github.com/eddelbuettel/rcppbdt, https://dirk.eddelbuettel.com/code/rcpp.bdt.html
  license: GPL-2
  summary: 'Access to Boost Date_Time functionality for dates, durations (both for days and date
    time objects), time zones, and posix time (''ptime'') is provided by using ''Rcpp
    modules''. The posix time implementation can support high-resolution of up to nano-second  precision
    by using 96 bits (instead of R''s 64) to present a ''ptime'' object (but this needs
    recompilation with a #define set).'
  license_family: GPL2
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-2'

extra:
  recipe-maintainers:
    - katietz

# The original CRAN metadata for this package was:

# Package: RcppBDT
# Type: Package
# Title: 'Rcpp' Bindings for the Boost Date_Time Library
# Version: 0.2.5
# Date: 2022-03-29
# Author: Dirk Eddelbuettel and Romain Francois
# Maintainer: Dirk Eddelbuettel <edd@debian.org>
# Description: Access to Boost Date_Time functionality for dates, durations (both for days and date time objects), time zones, and posix time ('ptime') is provided by using 'Rcpp modules'. The posix time implementation can support high-resolution of up to nano-second  precision by using 96 bits (instead of R's 64) to present a 'ptime' object (but this needs recompilation with a #define set).
# License: GPL (>= 2)
# LazyLoad: yes
# Imports: Rcpp, methods
# LinkingTo: Rcpp, BH
# URL: https://github.com/eddelbuettel/rcppbdt, https://dirk.eddelbuettel.com/code/rcpp.bdt.html
# BugReports: https://github.com/eddelbuettel/rcppbdt/issues
# RoxygenNote: 6.0.1
# NeedsCompilation: yes
# Packaged: 2022-03-29 11:04:33 UTC; edd
# Repository: CRAN
# Date/Publication: 2022-03-29 13:50:05 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
