{% set version = '1.0.5' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-genie
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/genie_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/genie/genie_{{ version }}.tar.gz
  sha256: 985aa0de4bec0478bb1cbaa7b24b63616af1a0eeeca7cfdb9164b4a188cb861f

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: datasets, testthat, stringi
requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{ compiler('cxx') }}            # [not win]
    - {{ compiler('m2w64_cxx') }}      # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}make
    - {{ posix }}sed               # [win]
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-rcpp >=1.0.0
    - r-genieclust

  run:
    - r-base
    - {{native}}gcc-libs         # [win]
    - r-rcpp >=1.0.0
    - r-genieclust

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('genie')"           # [not win]
    - "\"%R%\" -e \"library('genie')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: http://genieclust.gagolewski.com/
  license: GPL-3
  summary: Includes the reference implementation of Genie - a hierarchical clustering algorithm
    that links two point groups in such a way that an inequity measure (namely, the
    Gini index) of the cluster sizes does not significantly increase above a given threshold.
    This method most often outperforms many other data segmentation approaches in terms
    of clustering quality as tested on a wide range of benchmark datasets. At the same
    time, Genie retains the high speed of the single linkage approach, therefore it
    is also suitable for analysing larger data sets. For more details see (Gagolewski
    et al. 2016 <DOI:10.1016/j.ins.2016.05.003>). For an even faster and more feature-rich
    implementation, including, amongst others, noise point detection, see the 'genieclust'
    package.
  license_family: GPL3
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-3'

extra:
  recipe-maintainers:
    - katietz

# The original CRAN metadata for this package was:

# Package: genie
# Type: Package
# Title: Fast, Robust, and Outlier Resistant Hierarchical Clustering
# Version: 1.0.5
# Date: 2020-08-02
# Authors@R: c( person("Marek", "Gagolewski", role = c("aut", "cre", "cph"), email = "marek@gagolewski.com", comment = c(ORCID = "0000-0003-0637-6028")), person("Maciej", "Bartoszuk", role = "aut", email = "bartoszuk@rexamine.com", comment = c(ORCID = "0000-0001-6088-8273")), person("Anna", "Cena", role = "aut", email = "cena@rexamine.com", comment = c(ORCID = "0000-0001-8697-5383")) )
# Description: Includes the reference implementation of Genie - a hierarchical clustering algorithm that links two point groups in such a way that an inequity measure (namely, the Gini index) of the cluster sizes does not significantly increase above a given threshold. This method most often outperforms many other data segmentation approaches in terms of clustering quality as tested on a wide range of benchmark datasets. At the same time, Genie retains the high speed of the single linkage approach, therefore it is also suitable for analysing larger data sets. For more details see (Gagolewski et al. 2016 <DOI:10.1016/j.ins.2016.05.003>). For an even faster and more feature-rich implementation, including, amongst others, noise point detection, see the 'genieclust' package.
# License: GPL (>= 3)
# BugReports: http://github.com/gagolews/genie/issues
# URL: http://genieclust.gagolewski.com/
# Depends: R (>= 3.3.0), stats, genieclust
# Imports: Rcpp (>= 1.0.0)
# Suggests: datasets, testthat, stringi
# LinkingTo: Rcpp (>= 1.0.0)
# SystemRequirements: OpenMP, C++11
# RoxygenNote: 7.1.1
# NeedsCompilation: yes
# Packaged: 2020-08-02 09:13:53 UTC; gagolews
# Author: Marek Gagolewski [aut, cre, cph] (<https://orcid.org/0000-0003-0637-6028>), Maciej Bartoszuk [aut] (<https://orcid.org/0000-0001-6088-8273>), Anna Cena [aut] (<https://orcid.org/0000-0001-8697-5383>)
# Maintainer: Marek Gagolewski <marek@gagolewski.com>
# Repository: CRAN
# Date/Publication: 2020-08-02 22:00:02 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
