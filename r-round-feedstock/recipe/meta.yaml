{% set version = '0.21-0' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-round
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/round_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/round/round_{{ version }}.tar.gz
  sha256: a3a44038d2af7fa332fcd747fa56d9d0b8548c7cdb4830358001a30029b970b0

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: grDevices, graphics, Matrix, lattice, gmp, knitr, rmarkdown
requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}make
    - {{ posix }}sed               # [win]
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]

  host:
    - r-base

  run:
    - r-base
    - {{native}}gcc-libs         # [win]

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('round')"           # [not win]
    - "\"%R%\" -e \"library('round')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://gitlab.com/mmaechler/round/
  license: AGPL-3
  summary: Decimal rounding is non-trivial in binary arithmetic.  ISO standard round to even
    is more rare than typically assumed as most decimal fractions are not exactly representable
    in binary.  Our 'roundX()' versions explore differences between current and potential
    future versions of round() in R. Further, provides (some partly related) C99 math
    lib functions not in base R.
  license_family: AGPL
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/AGPL-3'
    - LICENSE

# The original CRAN metadata for this package was:

# Package: round
# Version: 0.21-0
# Date: 2023-10-10
# Title: Rounding to Decimal Digits
# Authors@R: c(person("Martin","Maechler", role=c("aut","cre"), email="maechler@stat.math.ethz.ch", comment = c(ORCID = "0000-0002-8685-9910")) , person("R-core", email = "R-core@R-project.org", role = "ctb", comment = '"r1.C" only') )
# Description: Decimal rounding is non-trivial in binary arithmetic.  ISO standard round to even is more rare than typically assumed as most decimal fractions are not exactly representable in binary.  Our 'roundX()' versions explore differences between current and potential future versions of round() in R. Further, provides (some partly related) C99 math lib functions not in base R.
# Imports: stats
# Suggests: grDevices, graphics, Matrix, lattice, gmp, knitr, rmarkdown
# License: AGPL (>= 3) | file LICENSE
# Encoding: UTF-8
# KeepSource: TRUE
# VignetteBuilder: knitr
# URL: https://gitlab.com/mmaechler/round/
# BugReports: https://gitlab.com/mmaechler/round/-/issues
# NeedsCompilation: yes
# Packaged: 2023-10-11 08:12:27 UTC; maechler
# Author: Martin Maechler [aut, cre] (<https://orcid.org/0000-0002-8685-9910>), R-core [ctb] ("r1.C" only)
# Maintainer: Martin Maechler <maechler@stat.math.ethz.ch>
# Repository: CRAN
# Date/Publication: 2023-10-12 14:30:02 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
