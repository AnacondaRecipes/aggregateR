{% set version = '5.5.0' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-spsurvey
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/spsurvey_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/spsurvey/spsurvey_{{ version }}.tar.gz
  sha256: b66bcde302ffa82a729258f05b01ee541357cf49b67dc381cd240da60cffcea6

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip
  noarch: generic

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: knitr, testthat, rmarkdown
requirements:
  build:
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-mass
    - r-boot
    - r-crossdes
    - r-deldir
    - r-lme4
    - r-sampling
    - r-sf
    - r-survey >=4.1_1
    - r-units

  run:
    - r-base
    - r-mass
    - r-boot
    - r-crossdes
    - r-deldir
    - r-lme4
    - r-sampling
    - r-sf
    - r-survey >=4.1_1
    - r-units

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('spsurvey')"           # [not win]
    - "\"%R%\" -e \"library('spsurvey')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://usepa.github.io/spsurvey/, https://github.com/USEPA/spsurvey
  license: GPL-3
  summary: A design-based approach to statistical inference, with a focus on spatial data. Spatially
    balanced samples are selected using the Generalized Random Tessellation Stratified
    (GRTS) algorithm. The GRTS algorithm can be applied to finite resources (point geometries)
    and infinite resources (linear / linestring and areal / polygon geometries) and
    flexibly accommodates a diverse set of sampling design features, including stratification,
    unequal inclusion probabilities, proportional (to size) inclusion probabilities,
    legacy (historical) sites, a minimum distance between sites, and two options for
    replacement sites (reverse hierarchical order and nearest neighbor). Data are analyzed
    using a wide range of analysis functions that perform categorical variable analysis,
    continuous variable analysis, attributable risk analysis, risk difference analysis,
    relative risk analysis, change analysis, and trend analysis. spsurvey can also be
    used to summarize objects, visualize objects, select samples that are not spatially
    balanced, select panel samples, measure the amount of spatial balance in a sample,
    adjust design weights, and more. For additional details, see Dumelle et al. (2023)
    <doi:10.18637/jss.v105.i03>.
  license_family: GPL3
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-3'

# The original CRAN metadata for this package was:

# Package: spsurvey
# Title: Spatial Sampling Design and Analysis
# Version: 5.5.0
# Authors@R: c( person("Michael", "Dumelle", role=c("aut","cre"), email = "Dumelle.Michael@epa.gov", comment = c(ORCID = "0000-0002-3393-5529")), person("Tom", "Kincaid", role="aut", email = "Kincaid.Tom@epa.gov"), person("Tony", "Olsen",  role="aut", email = "Olsen.Tony@epa.gov"), person("Marc", "Weber",  role="aut",, email = "Weber.Marc@epa.gov"), person("Don", "Stevens",  role="ctb"), person("Denis", "White",  role="ctb") )
# Maintainer: Michael Dumelle <Dumelle.Michael@epa.gov>
# Description: A design-based approach to statistical inference, with a focus on spatial data. Spatially balanced samples are selected using the Generalized Random Tessellation Stratified (GRTS) algorithm. The GRTS algorithm can be applied to finite resources (point geometries) and infinite resources (linear / linestring and areal / polygon geometries) and flexibly accommodates a diverse set of sampling design features, including stratification, unequal inclusion probabilities, proportional (to size) inclusion probabilities, legacy (historical) sites, a minimum distance between sites, and two options for replacement sites (reverse hierarchical order and nearest neighbor). Data are analyzed using a wide range of analysis functions that perform categorical variable analysis, continuous variable analysis, attributable risk analysis, risk difference analysis, relative risk analysis, change analysis, and trend analysis. spsurvey can also be used to summarize objects, visualize objects, select samples that are not spatially balanced, select panel samples, measure the amount of spatial balance in a sample, adjust design weights, and more. For additional details, see Dumelle et al. (2023) <doi:10.18637/jss.v105.i03>.
# Depends: R (>= 3.5.0), sf, survey (>= 4.1-1)
# Imports: boot, crossdes, deldir, graphics, grDevices, lme4, MASS, sampling, stats, units
# Suggests: knitr, testthat, rmarkdown
# License: GPL (>= 3)
# URL: https://usepa.github.io/spsurvey/, https://github.com/USEPA/spsurvey
# BugReports: https://github.com/USEPA/spsurvey/issues
# VignetteBuilder: knitr
# Encoding: UTF-8
# LazyData: true
# RoxygenNote: 7.1.2
# NeedsCompilation: no
# Packaged: 2023-05-16 19:17:13 UTC; MDUMELLE
# Author: Michael Dumelle [aut, cre] (<https://orcid.org/0000-0002-3393-5529>), Tom Kincaid [aut], Tony Olsen [aut], Marc Weber [aut], Don Stevens [ctb], Denis White [ctb]
# Repository: CRAN
# Date/Publication: 2023-05-16 22:50:02 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
