{% set version = '0.2.3' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-hipread
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/hipread_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/hipread/hipread_{{ version }}.tar.gz
  sha256: 04c5d951ba9f5c0797968bfb3a01e7767d7f104b6e0a98540b34966d8ffff80b

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: dplyr, readr, testthat
requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{ compiler('cxx') }}            # [not win]
    - {{ compiler('m2w64_cxx') }}      # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}make
    - {{ posix }}sed               # [win]
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-bh
    - r-r6
    - r-rcpp
    - r-rlang
    - r-tibble

  run:
    - r-base
    - {{native}}gcc-libs         # [win]
    - r-bh
    - r-r6
    - r-rcpp
    - r-rlang
    - r-tibble

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('hipread')"           # [not win]
    - "\"%R%\" -e \"library('hipread')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://CRAN.R-project.org/package=hipread
  license: GPL-2
  summary: Read hierarchical fixed width files like those commonly used by many census data providers.
    Also allows for reading of data in chunks, and reading 'gzipped' files without storing
    the full file in memory.
  license_family: GPL2
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-2'
    - LICENSE

# The original CRAN metadata for this package was:

# Package: hipread
# Type: Package
# Title: Read Hierarchical Fixed Width Files
# Version: 0.2.3
# Authors@R: c( person("Greg", "Freedman Ellis", role = "aut"), person("Derek Burk", email = "ipums+cran@umn.edu", role = c("aut", "cre")), person("Joe Grover", role = "ctb"), person("Mark Padgham", role = "ctb"), person("Hadley", "Wickham", , "hadley@rstudio.com", "ctb", comment = "Code adapted from readr"), person("Jim", "Hester", , "james.hester@rstudio.com", c("ctb"), comment = "Code adapted from readr"), person("Romain", "Francois", role = "ctb", comment = "Code adapted from readr"), person("R Core Team", role = "ctb", comment = "Code adapted from readr"), person("RStudio", role = c("cph", "fnd"), comment = "Code adapted from readr"), person("Jukka", "Jylanki", role = c("ctb", "cph"), comment = "Code adapted from readr"), person("Mikkel", "Jrgensen", role = c("ctb", "cph"), comment = "Code adapted from readr"), person("University of Minnesota", role = "cph"))
# Contact: ipums@umn.edu
# Description: Read hierarchical fixed width files like those commonly used by many census data providers. Also allows for reading of data in chunks, and reading 'gzipped' files without storing the full file in memory.
# License: GPL (>= 2) | file LICENSE
# Encoding: UTF-8
# LinkingTo: Rcpp, BH
# Imports: Rcpp, R6, rlang, tibble
# Suggests: dplyr, readr, testthat
# SystemRequirements: C++11
# RoxygenNote: 7.2.1
# NeedsCompilation: yes
# Packaged: 2022-09-30 12:31:29 UTC; Derek
# Author: Greg Freedman Ellis [aut], Derek Burk [aut, cre], Joe Grover [ctb], Mark Padgham [ctb], Hadley Wickham [ctb] (Code adapted from readr), Jim Hester [ctb] (Code adapted from readr), Romain Francois [ctb] (Code adapted from readr), R Core Team [ctb] (Code adapted from readr), RStudio [cph, fnd] (Code adapted from readr), Jukka Jylanki [ctb, cph] (Code adapted from readr), Mikkel Jrgensen [ctb, cph] (Code adapted from readr), University of Minnesota [cph]
# Maintainer: Derek Burk <ipums+cran@umn.edu>
# Repository: CRAN
# Date/Publication: 2022-09-30 13:00:02 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
