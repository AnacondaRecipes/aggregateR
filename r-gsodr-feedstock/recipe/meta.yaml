{% set version = '3.1.9' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-gsodr
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/GSODR_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/GSODR/GSODR_{{ version }}.tar.gz
  sha256: 3282e20906a6fcb309437555826a1e562598977c10efa8cd6623782d395d515e

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip
  noarch: generic

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: dplyr, spelling, ggplot2, gridExtra, knitr, mapproj, maps, rmarkdown, testthat, tidyr
requirements:
  build:
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-r.utils
    - r-countrycode
    - r-curl
    - r-data.table

  run:
    - r-base
    - r-r.utils
    - r-countrycode
    - r-curl
    - r-data.table

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('GSODR')"           # [not win]
    - "\"%R%\" -e \"library('GSODR')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://docs.ropensci.org/GSODR/
  license: MIT
  summary: Provides automated downloading, parsing, cleaning, unit conversion and formatting
    of Global Surface Summary of the Day ('GSOD') weather data from the from the USA
    National Centers for Environmental Information ('NCEI').  Units are converted from
    from United States Customary System ('USCS') units to International System of Units
    ('SI').  Stations may be individually checked for number of missing days defined
    by the user, where stations with too many missing observations are omitted.  Only
    stations with valid reported latitude and longitude values are permitted in the
    final data.  Additional useful elements, saturation vapour pressure ('es'), actual
    vapour pressure ('ea') and relative humidity ('RH') are calculated from the original
    data using the improved August-Roche-Magnus approximation (Alduchov & Eskridge 1996)
    and included in the final data set.  The resulting metadata include station identification
    information, country, state, latitude, longitude, elevation, weather observations
    and associated flags.  For information on the 'GSOD' data from 'NCEI', please see
    the 'GSOD' 'readme.txt' file available from, <https://www1.ncdc.noaa.gov/pub/data/gsod/readme.txt>.
  license_family: MIT
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/MIT'
    - LICENSE

# The original CRAN metadata for this package was:

# Package: GSODR
# Type: Package
# Title: Global Surface Summary of the Day ('GSOD') Weather Data Client
# Version: 3.1.9
# Authors@R: c( person("Adam H.", "Sparks", role = c("aut", "cre"), email = "adamhsparks@gmail.com", comment = c(ORCID = "0000-0002-0061-8359")), person("Tomislav", "Hengl", role = "aut", email = "tom.hengl@isric.org", comment = c(ORCID = "0000-0002-9921-5129")), person("Andrew", "Nelson", role = "aut", email = "dr.andy.nelson@gmail.com", comment = c(ORCID = "0000-0002-7249-3778")), person("Hugh", "Parsonage", role = c("cph", "ctb"), email = "hugh.parsonage@gmail.com", comment = c(ORCID = "0000-0003-4055-0835")), person("Taras", "Kaduk", role = "ctb", email = "taras.kaduk@gmail.com", comment = "Suggestion for handling bulk station downloads more efficiently"), person("Gwenael", "Giboire", role = "ctb", email = "gwenael.giboire@oda-groupe.com", comment = "Several bug reports in early versions and testing feedback"), person("ukasz", "Pawlik", role = "ctb", email = "lukpawlik@gmail.com", comment = "Reported bug in windspeed conversion calculation"), person("Ross","Darnell", role = "ctb", email = "Ross.Darnell@data61.csiro.au", comment = c( "Reported bug in 'Windows OS' versions causing 'GSOD' data untarring to fail", ORCID = "0000-0002-7973-6322")), person("Tyler", "Widdison", role = "ctb", email = "Tyler.Widdison@usav.org", comment = "Reported bug where `nearest_stations()` did not return stations in order of nearest to farthest"), person(given = "Western Australia Agriculture Authority (WAAA)", role = "cph", comment = c("Supported the development of 'GSODR' through Adam H. Sparks's time.")))
# URL: https://docs.ropensci.org/GSODR/
# BugReports: https://github.com/ropensci/GSODR/issues
# Description: Provides automated downloading, parsing, cleaning, unit conversion and formatting of Global Surface Summary of the Day ('GSOD') weather data from the from the USA National Centers for Environmental Information ('NCEI').  Units are converted from from United States Customary System ('USCS') units to International System of Units ('SI').  Stations may be individually checked for number of missing days defined by the user, where stations with too many missing observations are omitted.  Only stations with valid reported latitude and longitude values are permitted in the final data.  Additional useful elements, saturation vapour pressure ('es'), actual vapour pressure ('ea') and relative humidity ('RH') are calculated from the original data using the improved August-Roche-Magnus approximation (Alduchov & Eskridge 1996) and included in the final data set.  The resulting metadata include station identification information, country, state, latitude, longitude, elevation, weather observations and associated flags.  For information on the 'GSOD' data from 'NCEI', please see the 'GSOD' 'readme.txt' file available from, <https://www1.ncdc.noaa.gov/pub/data/gsod/readme.txt>.
# Depends: R (>= 3.5.0)
# License: MIT + file LICENSE
# Imports: countrycode, curl, data.table, R.utils, stats, utils
# Suggests: dplyr, spelling, ggplot2, gridExtra, knitr, mapproj, maps, rmarkdown, testthat, tidyr
# RoxygenNote: 7.2.3
# Encoding: UTF-8
# Language: en-US
# NeedsCompilation: no
# Repository: CRAN
# ByteCompile: TRUE
# VignetteBuilder: knitr
# X-schema.org-applicationCategory: Tools
# X-schema.org-keywords: US-NCEI, meteorological-data, global-weather, weather, weather-data, meteorology, station-data, surface-weather, data-access, US-NCDC
# X-schema.org-isPartOf: https://ropensci.org
# Packaged: 2023-08-22 00:15:43 UTC; adamsparks
# Author: Adam H. Sparks [aut, cre] (<https://orcid.org/0000-0002-0061-8359>), Tomislav Hengl [aut] (<https://orcid.org/0000-0002-9921-5129>), Andrew Nelson [aut] (<https://orcid.org/0000-0002-7249-3778>), Hugh Parsonage [cph, ctb] (<https://orcid.org/0000-0003-4055-0835>), Taras Kaduk [ctb] (Suggestion for handling bulk station downloads more efficiently), Gwenael Giboire [ctb] (Several bug reports in early versions and testing feedback), ukasz Pawlik [ctb] (Reported bug in windspeed conversion calculation), Ross Darnell [ctb] (Reported bug in 'Windows OS' versions causing 'GSOD' data untarring to fail, <https://orcid.org/0000-0002-7973-6322>), Tyler Widdison [ctb] (Reported bug where `nearest_stations()` did not return stations in order of nearest to farthest), Western Australia Agriculture Authority (WAAA) [cph] (Supported the development of 'GSODR' through Adam H. Sparks's time.)
# Maintainer: Adam H. Sparks <adamhsparks@gmail.com>
# Date/Publication: 2023-08-22 07:00:07 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
