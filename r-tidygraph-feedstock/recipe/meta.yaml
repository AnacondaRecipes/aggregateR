{% set version = '1.2.3' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-tidygraph
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/tidygraph_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/tidygraph/tidygraph_{{ version }}.tar.gz
  sha256: b09c06b12583ae57edd1ec01e61a0e1b7a4b82358361fb28a6046dbece475687

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: network, data.tree, ape, graph, methods, testthat, covr, seriation, netrankr, influenceR, NetSwan
requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{ compiler('cxx') }}            # [not win]
    - {{ compiler('m2w64_cxx') }}      # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}make
    - {{ posix }}sed               # [win]
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-r6
    - r-cli
    - r-cpp11
    - r-dplyr >=0.8.5
    - r-igraph >=1.3.0
    - r-magrittr
    - r-pillar
    - r-rlang
    - r-tibble
    - r-tidyr

  run:
    - r-base
    - {{native}}gcc-libs         # [win]
    - r-r6
    - r-cli
    - r-cpp11
    - r-dplyr >=0.8.5
    - r-igraph >=1.3.0
    - r-magrittr
    - r-pillar
    - r-rlang
    - r-tibble
    - r-tidyr

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('tidygraph')"           # [not win]
    - "\"%R%\" -e \"library('tidygraph')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://tidygraph.data-imaginist.com, https://github.com/thomasp85/tidygraph
  license: MIT
  summary: A graph, while not "tidy" in itself, can be thought of as two tidy data frames describing
    node and edge data respectively. 'tidygraph' provides an approach to manipulate
    these two virtual data frames using the API defined in the 'dplyr' package, as well
    as provides tidy interfaces to a lot of common graph algorithms.
  license_family: MIT
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/MIT'
    - LICENSE

# The original CRAN metadata for this package was:

# Package: tidygraph
# Type: Package
# Title: A Tidy API for Graph Manipulation
# Version: 1.2.3
# Authors@R: person(given = "Thomas Lin", family = "Pedersen", role = c("cre", "aut"), email = "thomasp85@gmail.com", comment = c(ORCID = "0000-0002-5147-4711"))
# Maintainer: Thomas Lin Pedersen <thomasp85@gmail.com>
# Description: A graph, while not "tidy" in itself, can be thought of as two tidy data frames describing node and edge data respectively. 'tidygraph' provides an approach to manipulate these two virtual data frames using the API defined in the 'dplyr' package, as well as provides tidy interfaces to a lot of common graph algorithms.
# License: MIT + file LICENSE
# Encoding: UTF-8
# RoxygenNote: 7.2.1
# Imports: tibble, dplyr (>= 0.8.5), igraph (>= 1.3.0), magrittr, utils, rlang, R6, tools, stats, tidyr, pillar, cli
# URL: https://tidygraph.data-imaginist.com, https://github.com/thomasp85/tidygraph
# BugReports: https://github.com/thomasp85/tidygraph/issues
# LinkingTo: cpp11
# Suggests: network, data.tree, ape, graph, methods, testthat, covr, seriation, netrankr, influenceR, NetSwan
# NeedsCompilation: yes
# Packaged: 2023-02-01 20:33:34 UTC; thomas
# Author: Thomas Lin Pedersen [cre, aut] (<https://orcid.org/0000-0002-5147-4711>)
# Repository: CRAN
# Date/Publication: 2023-02-01 21:10:02 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
