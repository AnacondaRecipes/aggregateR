{% set version = '1.1.7' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-rcbsubset
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/rcbsubset_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/rcbsubset/rcbsubset_{{ version }}.tar.gz
  sha256: 2ff2fd4463cd9628ab6ffd4b8a1be31f43a4642c12043088eeb75780b97c924c

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip
  noarch: generic

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: testthat, rrelaxiv, optmatch
requirements:
  build:
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-mass
    - r-plyr
    - r-rcbalance
    - r-rlemon

  run:
    - r-base
    - r-mass
    - r-plyr
    - r-rcbalance
    - r-rlemon

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('rcbsubset')"           # [not win]
    - "\"%R%\" -e \"library('rcbsubset')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://CRAN.R-project.org/package=rcbsubset
  license: MIT
  summary: Tools for optimal subset matching of treated units and control units in observational
    studies, with support for refined covariate balance constraints, (including fine
    and near-fine balance as special cases). A close relative is the 'rcbalance' package.  See
    Pimentel, et al.(2015) <doi:10.1080/01621459.2014.997879> and Pimentel and Kelz
    (2020) <doi:10.1080/01621459.2020.1720693>. The rrelaxiv package, which provides
    an alternative solver for the underlying network flow problems, carries an academic
    license and is not available on CRAN, but may be downloaded from Github at <https://github.com/josherrickson/rrelaxiv/>.
  license_family: MIT
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/MIT'
    - LICENSE

extra:
  recipe-maintainers:
    - katietz

# The original CRAN metadata for this package was:

# Package: rcbsubset
# Type: Package
# Title: Optimal Subset Matching with Refined Covariate Balance
# Version: 1.1.7
# Date: 2022-3-23
# Author: Samuel D. Pimentel
# Maintainer: Samuel D. Pimentel <spi@berkeley.edu>
# Description: Tools for optimal subset matching of treated units and control units in observational studies, with support for refined covariate balance constraints, (including fine and near-fine balance as special cases). A close relative is the 'rcbalance' package.  See Pimentel, et al.(2015) <doi:10.1080/01621459.2014.997879> and Pimentel and Kelz (2020) <doi:10.1080/01621459.2020.1720693>. The rrelaxiv package, which provides an alternative solver for the underlying network flow problems, carries an academic license and is not available on CRAN, but may be downloaded from Github at <https://github.com/josherrickson/rrelaxiv/>.
# Depends: R (>= 3.2.0), MASS, plyr
# Imports: rcbalance, rlemon
# License: MIT + file LICENSE
# Suggests: testthat, rrelaxiv, optmatch
# Additional_repositories: https://errickson.net/rrelaxiv/
# NeedsCompilation: no
# Packaged: 2022-03-25 16:55:11 UTC; sdbpimentel
# Repository: CRAN
# Date/Publication: 2022-03-25 23:20:06 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
