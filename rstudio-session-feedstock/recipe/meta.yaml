{% set version_major = '2023' %}
{% set version_minor = '12' %}
{% set version_patch = '0' %}
{% set version_suffix = '+369' %}
{% set version = version_major + '.' + version_minor + '.' + version_patch + version_suffix %}

package:
  name: rstudio-session
  version: {{ version }}

source:
  - url: https://github.com/rstudio/rstudio/archive/refs/tags/v{{ version }}.tar.gz
    sha256: 6ee6acdd361b526fdc5fc922600cec0f04a7fe8304ae62e5a65d5fd4c55e824c
    fn: rstudio-{{ version }}.tar.gz

build:
  number: 0
  skip: True  # [not linux]
  script_env:
   - RSTUDIO_VERSION_MAJOR={{ version_major }}
   - RSTUDIO_VERSION_MINOR={{ version_minor }}
   - RSTUDIO_VERSION_PATCH={{ version_patch }}
   - RSTUDIO_VERSION_SUFFIX={{ version_suffix }}

requirements:
  build:
    - {{ compiler('cxx') }}
    - {{ cdt('pam-devel') }}
    - {{ cdt('audit-libs') }}
    - cmake
    - ninja
    - pkg-config
    - curl
    - unzip

  host:
    - icu >=73
    - libboost 1.82.0
    - libuuid
    - openssl
    - pandoc
    - r-base 4.3.1
    - sqlite
    - yaml-cpp
    - zlib >=1.2

  run:
    - libboost
    - libuuid
    - sqlite
    - yaml-cpp
    - pandoc
    - r-base 4.3.1

about:
  home: https://www.rstudio.com/
  license: Commercial or AGPLv3
  license_family: GPL
  summary: A set of integrated tools designed to help you be more productive with R
  description: |
    RStudio is an integrated development environment (IDE)
    for R. It includes a console, syntax-highlighting
    editor that supports direct code execution, as well
    as tools for plotting, history, debugging and
    workspace management.
  doc_url: https://support.rstudio.com/hc/en-us/sections/200107586-Using-RStudio
  dev_url: https://github.com/rstudio/rstudio
