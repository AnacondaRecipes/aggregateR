{% set version = '2022.03.22' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-riskregression
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/riskRegression_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/riskRegression/riskRegression_{{ version }}.tar.gz
  sha256: 4e1a66a45be73ae07bbc537192d3132e1cfc67ad24bc4b281b5cffa44282a047

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: boot, smcfcs, casebase, ipw, gbm, flexsurv, mgcv, mstate, nnls, numDeriv, party, pec, penalized, pROC, randomForest, randomForestSRC, rpart, scam, SuperLearner, testthat, R.rsp
requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{ compiler('cxx') }}            # [not win]
    - {{ compiler('m2w64_cxx') }}      # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}make
    - {{ posix }}sed               # [win]
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-publish
    - r-rcpp
    - r-rcpparmadillo
    - r-cmprsk
    - r-data.table >=1.12.2
    - r-doparallel
    - r-foreach
    - r-ggplot2 >=3.1.0
    - r-lattice
    - r-lava >=1.6.5
    - r-mets
    - r-mvtnorm
    - r-plotrix
    - r-prodlim >=2018.4.18
    - r-ranger
    - r-rms >=5.1.3
    - r-survival >=2.44.1
    - r-timereg >=1.9.3

  run:
    - r-base
    - {{native}}gcc-libs         # [win]
    - r-publish
    - r-rcpp
    - r-rcpparmadillo
    - r-cmprsk
    - r-data.table >=1.12.2
    - r-doparallel
    - r-foreach
    - r-ggplot2 >=3.1.0
    - r-lattice
    - r-lava >=1.6.5
    - r-mets
    - r-mvtnorm
    - r-plotrix
    - r-prodlim >=2018.4.18
    - r-ranger
    - r-rms >=5.1.3
    - r-survival >=2.44.1
    - r-timereg >=1.9.3

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('riskRegression')"           # [not win]
    - "\"%R%\" -e \"library('riskRegression')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://github.com/tagteam/riskRegression
  license: GPL-2
  summary: Implementation of the following methods for event history analysis. Risk regression
    models for survival endpoints also in the presence of competing risks are fitted
    using binomial regression based on a time sequence of binary event status variables.
    A formula interface for the Fine-Gray regression model and an interface for the
    combination of cause-specific Cox regression models. A toolbox for assessing and
    comparing performance of risk predictions (risk markers and risk prediction models).
    Prediction performance is measured by the Brier score and the area under the ROC
    curve for binary possibly time-dependent outcome. Inverse probability of censoring
    weighting and pseudo values are used to deal with right censored data. Lists of
    risk markers and lists of risk models are assessed simultaneously. Cross-validation
    repeatedly splits the data, trains the risk prediction models on one part of each
    split and then summarizes and compares the performance across splits.
  license_family: GPL2
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-2'

# The original CRAN metadata for this package was:

# Package: riskRegression
# Type: Package
# Title: Risk Regression Models and Prediction Scores for Survival Analysis with Competing Risks
# Version: 2022.03.22
# Authors@R: c(person("Thomas Alexander", "Gerds", role = c("aut", "cre"), email = "tag@biostat.ku.dk"), person("Johan Sebastian", "Ohlendorff", role = "aut"), person("Paul", "Blanche", role = "ctb"), person("Rikke", "Mortensen", role = "ctb"), person("Marvin", "Wright", role = "ctb"), person("Nikolaj", "Tollenaar", role = "ctb"), person("John", "Muschelli", role = "ctb"), person("Ulla Brasch", "Mogensen", role = "ctb"), person("Brice", "Ozenne", role = "aut", email = "broz@sund.ku.dk", comment = c(ORCID = "0000-0001-9694-2956")))
# Depends: R (>= 3.5.0),
# Imports: cmprsk, data.table (>= 1.12.2), doParallel, foreach, ggplot2 (>= 3.1.0), graphics, lattice, lava (>= 1.6.5), mets, mvtnorm, parallel, plotrix, prodlim (>= 2018.4.18), Publish, ranger, Rcpp, rms (>= 5.1.3), stats, survival (>= 2.44.1), timereg (>= 1.9.3)
# LinkingTo: Rcpp, RcppArmadillo
# Suggests: boot, smcfcs, casebase, ipw, gbm, flexsurv, mgcv, mstate, nnls, numDeriv, party, pec, penalized, pROC, randomForest, randomForestSRC, rpart, scam, SuperLearner, testthat, R.rsp
# Maintainer: Thomas Alexander Gerds <tag@biostat.ku.dk>
# Description: Implementation of the following methods for event history analysis. Risk regression models for survival endpoints also in the presence of competing risks are fitted using binomial regression based on a time sequence of binary event status variables. A formula interface for the Fine-Gray regression model and an interface for the combination of cause-specific Cox regression models. A toolbox for assessing and comparing performance of risk predictions (risk markers and risk prediction models). Prediction performance is measured by the Brier score and the area under the ROC curve for binary possibly time-dependent outcome. Inverse probability of censoring weighting and pseudo values are used to deal with right censored data. Lists of risk markers and lists of risk models are assessed simultaneously. Cross-validation repeatedly splits the data, trains the risk prediction models on one part of each split and then summarizes and compares the performance across splits.
# License: GPL (>= 2)
# RoxygenNote: 7.1.2
# VignetteBuilder: R.rsp
# Encoding: UTF-8
# URL: https://github.com/tagteam/riskRegression
# BugReports: https://github.com/tagteam/riskRegression/issues
# NeedsCompilation: yes
# Packaged: 2022-03-22 18:02:27 UTC; tag
# Author: Thomas Alexander Gerds [aut, cre], Johan Sebastian Ohlendorff [aut], Paul Blanche [ctb], Rikke Mortensen [ctb], Marvin Wright [ctb], Nikolaj Tollenaar [ctb], John Muschelli [ctb], Ulla Brasch Mogensen [ctb], Brice Ozenne [aut] (<https://orcid.org/0000-0001-9694-2956>)
# Repository: CRAN
# Date/Publication: 2022-03-23 10:10:02 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
