{% set version = '0.6-2' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-coop
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/coop_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/coop/coop_{{ version }}.tar.gz
  sha256: 30ff8fb2ee0b7f91079ce954bd73c9c54208558a6c347d5047484ae80f145614

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: memuse
requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{posix}}filesystem        # [win]
    - {{posix}}sed               # [win]
    - {{posix}}grep              # [win]
    - {{posix}}autoconf
    - {{posix}}automake          # [not win]
    - {{posix}}automake-wrapper  # [win]
    - {{posix}}pkg-config
    - {{posix}}make
    - {{posix}}coreutils         # [win]
    - {{posix}}zip               # [win]
    - llvm-openmp >=4.0.1        # [osx]

  host:
    - r-base
    - llvm-openmp >=4.0.1        # [osx]

  run:
    - r-base
    - {{native}}gcc-libs         # [win]
    - llvm-openmp >=4.0.1        # [osx]

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('coop')"           # [not win]
    - "\"%R%\" -e \"library('coop')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://github.com/wrathematics/coop
  license: BSD_2_clause
  summary: 'Fast implementations of the co-operations: covariance, correlation, and cosine similarity.  The
    implementations are fast and memory-efficient and their use is resolved automatically
    based on the input data, handled by R''s S3 methods.  Full descriptions of the algorithms
    and benchmarks are available in the package vignettes.'

  license_family: BSD
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/BSD_2_clause'
    - LICENSE

extra:
  recipe-maintainers:
    - katietz

# The original CRAN metadata for this package was:

# Package: coop
# Type: Package
# Title: Co-Operation: Fast Covariance, Correlation, and Cosine Similarity Operations
# Version: 0.6-2
# Description: Fast implementations of the co-operations: covariance, correlation, and cosine similarity.  The implementations are fast and memory-efficient and their use is resolved automatically based on the input data, handled by R's S3 methods.  Full descriptions of the algorithms and benchmarks are available in the package vignettes.
# License: BSD 2-clause License + file LICENSE
# Depends: R (>= 3.1.0)
# Enhances: slam (>= 0.1.32), Matrix
# Suggests: memuse
# NeedsCompilation: yes
# ByteCompile: yes
# URL: https://github.com/wrathematics/coop
# BugReports: https://github.com/wrathematics/coop/issues
# Authors@R: c(person("Drew", "Schmidt", role=c("aut", "cre"), email="wrathematics@gmail.com"),  person("Christian", "Heckendorf", role="ctb", comment="Caught some memory errors."))
# Maintainer: Drew Schmidt <wrathematics@gmail.com>
# RoxygenNote: 5.0.1
# Packaged: 2019-04-21 20:10:12 UTC; mschmid3
# Author: Drew Schmidt [aut, cre], Christian Heckendorf [ctb] (Caught some memory errors.)
# Repository: CRAN
# Date/Publication: 2019-04-22 05:00:08 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
