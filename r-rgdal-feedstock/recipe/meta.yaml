{% set version = '1.6-7' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-rgdal
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/rgdal_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/rgdal/rgdal_{{ version }}.tar.gz
  sha256: 555cedfdadb05db90b061d4b056f96d8b7010c00ea54bc6c1bbcc7684fadae33

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: knitr, DBI, RSQLite, maptools, mapview, rmarkdown, curl, rgeos
requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{ compiler('cxx') }}            # [not win]
    - {{ compiler('m2w64_cxx') }}      # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}sed               # [win]
    - {{ posix }}grep              # [win]
    - {{ posix }}autoconf
    - {{ posix }}automake          # [not win]
    - {{ posix }}automake-wrapper  # [win]
    - {{ posix }}pkg-config
    - {{ posix }}make
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-sp >=1.1_0
    - libgdal

  run:
    - r-base
    - {{native}}gcc-libs         # [win]
    - r-sp >=1.1_0
    - libgdal

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('rgdal')"           # [not win]
    - "\"%R%\" -e \"library('rgdal')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: http://rgdal.r-forge.r-project.org, https://gdal.org, https://proj.org, https://r-forge.r-project.org/projects/rgdal/
  license: GPL-2
  summary: Provides bindings to the 'Geospatial' Data Abstraction Library ('GDAL') (>= 1.11.4)
    and access to projection/transformation operations from the 'PROJ' library. Please
    note that 'rgdal' will be retired during October 2023, plan transition to sf/stars/'terra'
    functions using 'GDAL' and 'PROJ' at your earliest convenience (see <https://r-spatial.org/r/2023/05/15/evolution4.html>
    and earlier blogs for guidance). Use is made of classes defined in the 'sp' package.
    Raster and vector map data can be imported into R, and raster and vector 'sp' objects
    exported. The 'GDAL' and 'PROJ' libraries are external to the package, and, when
    installing the package from source, must be correctly installed first; it is important
    that 'GDAL' < 3 be matched with 'PROJ' < 6. From 'rgdal' 1.5-8, installed with to
    'GDAL' >=3, 'PROJ' >=6 and 'sp' >= 1.4, coordinate reference systems use 'WKT2_2019'
    strings, not 'PROJ' strings. 'Windows' and 'macOS' binaries (including 'GDAL', 'PROJ'
    and their dependencies) are provided on 'CRAN'.
  license_family: GPL2
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-2'

extra:
  recipe-maintainers:
    - katietz

# The original CRAN metadata for this package was:

# Package: rgdal
# Title: Bindings for the 'Geospatial' Data Abstraction Library
# Version: 1.6-7
# Date: 2023-05-31
# Depends: R (>= 3.5.0), methods, sp (>= 1.1-0)
# Imports: grDevices, graphics, stats, utils
# LinkingTo: sp
# Suggests: knitr, DBI, RSQLite, maptools, mapview, rmarkdown, curl, rgeos
# NeedsCompilation: yes
# Description: Provides bindings to the 'Geospatial' Data Abstraction Library ('GDAL') (>= 1.11.4) and access to projection/transformation operations from the 'PROJ' library. Please note that 'rgdal' will be retired during October 2023, plan transition to sf/stars/'terra' functions using 'GDAL' and 'PROJ' at your earliest convenience (see <https://r-spatial.org/r/2023/05/15/evolution4.html> and earlier blogs for guidance). Use is made of classes defined in the 'sp' package. Raster and vector map data can be imported into R, and raster and vector 'sp' objects exported. The 'GDAL' and 'PROJ' libraries are external to the package, and, when installing the package from source, must be correctly installed first; it is important that 'GDAL' < 3 be matched with 'PROJ' < 6. From 'rgdal' 1.5-8, installed with to 'GDAL' >=3, 'PROJ' >=6 and 'sp' >= 1.4, coordinate reference systems use 'WKT2_2019' strings, not 'PROJ' strings. 'Windows' and 'macOS' binaries (including 'GDAL', 'PROJ' and their dependencies) are provided on 'CRAN'.
# Authors@R: c( person("Roger", "Bivand", role = c("cre", "aut"), email = "Roger.Bivand@nhh.no", comment=c(ORCID="0000-0003-2392-6140")), person("Tim", "Keitt", role = "aut"), person("Barry", "Rowlingson", role = c("aut", "ctb")), person("Edzer", "Pebesma", role = "ctb"), person("Michael", "Sumner", role = "ctb"), person("Robert", "Hijmans", role = "ctb"), person("Daniel", "Baston", role = "ctb"), person("Even", "Rouault", role = c("cph", "ctb")), person("Frank", "Warmerdam", role = c("cph", "ctb")), person("Jeroen", "Ooms", role = "ctb"), person("Colin", "Rundel", role = "ctb"))
# License: GPL (>= 2)
# URL: http://rgdal.r-forge.r-project.org, https://gdal.org, https://proj.org, https://r-forge.r-project.org/projects/rgdal/
# SystemRequirements: PROJ (>= 4.8.0, https://proj.org/download.html) and GDAL (>= 1.11.4, https://gdal.org/download.html), with versions either (A) PROJ < 6 and GDAL < 3 or (B) PROJ >= 6 and GDAL >= 3. For degraded PROJ 6 or 7 and GDAL < 3, use the configure argument '--with-proj_api="proj_api.h"'.
# VignetteBuilder: knitr
# Packaged: 2023-05-31 10:08:43 UTC; rsb
# Author: Roger Bivand [cre, aut] (<https://orcid.org/0000-0003-2392-6140>), Tim Keitt [aut], Barry Rowlingson [aut, ctb], Edzer Pebesma [ctb], Michael Sumner [ctb], Robert Hijmans [ctb], Daniel Baston [ctb], Even Rouault [cph, ctb], Frank Warmerdam [cph, ctb], Jeroen Ooms [ctb], Colin Rundel [ctb]
# Maintainer: Roger Bivand <Roger.Bivand@nhh.no>
# Repository: CRAN
# Date/Publication: 2023-05-31 22:30:02 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
