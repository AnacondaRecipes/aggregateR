{% set version = '0.4.5' %}

{% set msystem = 'ucrt64-' if win else '' %}
{% set native = '' if win else '' %}
{% set posix = 'msys2-' if win else '' %}

package:
  name: r-proj
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/PROJ_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/PROJ/PROJ_{{ version }}.tar.gz
  sha256: abef2f862aa3cf62e642990c6fb9ea8735e7331d4ae9b7130e9f5ef0cd1e0347

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: testthat (>= 2.1.0), spelling, knitr, rmarkdown
requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('ucrt64_c') }}        # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}sed               # [win]
    - {{ posix }}grep              # [win]
    - {{ posix }}autoconf
    - {{ posix }}automake          # [not win]
    - {{ posix }}automake-wrapper  # [win]
    - {{ posix }}pkg-config
    - {{ posix }}make
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]

  host:
    - r-base
    # PROJ is required to build a package and for runtime.
    - proj

  run:
    - r-base
    - {{msystem}}gcc-libs         # [win]
    - proj

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('PROJ')"           # [not win]
    - "\"%R%\" -e \"library('PROJ')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://github.com/hypertidy/PROJ
  license: GPL-3
  summary: A wrapper around the generic coordinate transformation software 'PROJ' that transforms
    coordinates from one coordinate reference system ('CRS') to another. This includes
    cartographic projections as well as geodetic transformations.  The intention is
    for this package to be used by user-packages such as 'reproj', and that the older
    'PROJ.4' and version 5 pathways be provided by the 'proj4' package.
  license_family: GPL3
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-3'

# The original CRAN metadata for this package was:

# Package: PROJ
# Title: Generic Coordinate System Transformations Using 'PROJ'
# Version: 0.4.5
# Authors@R: c(person(given = "Michael D.", family = "Sumner", role = c("aut", "cre"), email = "mdsumner@gmail.com", comment = c(ORCID = "0000-0002-2471-7511")), person("Jeroen", "Ooms", role = c("ctb"), comment = "provided PROJ library support on Windows, and assistance with Windows configuration"), person("Simon", "Urbanek", role = c("cph", "ctb"), comment = "wrote original code versions for PROJ version 6"), person("Dewey", "Dunnington", role = c("ctb"), comment = "key code contributions"))
# Description: A wrapper around the generic coordinate transformation software 'PROJ' that transforms coordinates from one coordinate reference system ('CRS') to another. This includes cartographic projections as well as geodetic transformations.  The intention is for this package to be used by user-packages such as 'reproj', and that the older 'PROJ.4' and version 5 pathways be provided by the 'proj4' package.
# Depends: R (>= 3.0.2)
# License: GPL-3
# Encoding: UTF-8
# LazyData: true
# Suggests: testthat (>= 2.1.0), spelling, knitr, rmarkdown
# URL: https://github.com/hypertidy/PROJ
# BugReports: https://github.com/hypertidy/PROJ/issues
# Language: en-US
# VignetteBuilder: knitr
# SystemRequirements: PROJ (>= 6.3.1)
# RoxygenNote: 7.2.3
# NeedsCompilation: yes
# Packaged: 2023-12-01 10:51:56 UTC; gdal
# Author: Michael D. Sumner [aut, cre] (<https://orcid.org/0000-0002-2471-7511>), Jeroen Ooms [ctb] (provided PROJ library support on Windows, and assistance with Windows configuration), Simon Urbanek [cph, ctb] (wrote original code versions for PROJ version 6), Dewey Dunnington [ctb] (key code contributions)
# Maintainer: Michael D. Sumner <mdsumner@gmail.com>
# Repository: CRAN
# Date/Publication: 2023-12-01 22:10:08 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
