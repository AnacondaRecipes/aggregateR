{% set version = '1.0.1' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-slfm
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/slfm_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/slfm/slfm_{{ version }}.tar.gz
  sha256: 1eca2ee464a55d14cd3c93134097da9d3c2050179e2697d0214b6f47f26eee68

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{ compiler('cxx') }}            # [not win]
    - {{ compiler('m2w64_cxx') }}      # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}make
    - {{ posix }}sed               # [win]
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-rcpp >=0.11.0
    - r-rcpparmadillo
    - r-coda
    - r-lattice

  run:
    - r-base
    - {{native}}gcc-libs         # [win]
    - r-rcpp >=0.11.0
    - r-rcpparmadillo
    - r-coda
    - r-lattice

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('slfm')"           # [not win]
    - "\"%R%\" -e \"library('slfm')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://CRAN.R-project.org/package=slfm
  license: GPL-2
  summary: 'Set of tools to find coherent patterns in gene expression (microarray) data using
    a Bayesian Sparse Latent Factor Model (SLFM) <DOI:10.1007/978-3-319-12454-4_15>.
    Considerable effort has been put to build a fast and memory efficient package, which
    makes this proposal an interesting and computationally convenient alternative to
    study patterns of gene expressions exhibited in matrices. The package contains the
    implementation of two versions of the model based on different mixture priors for
    the loadings: one relies on a degenerate component at zero and the other uses a
    small variance normal distribution for the spike part of the mixture.'
  license_family: GPL2
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-2'

extra:
  recipe-maintainers:
    - katietz

# The original CRAN metadata for this package was:

# Package: slfm
# Type: Package
# Title: Fitting a Bayesian Sparse Latent Factor Model in Gene Expression Analysis
# Authors@R: c(person("Vinicius", "Mayrink", role = c("aut","cre"), email = "vdinizm@gmail.com"), person("Joao", "Duarte", role = c("aut")))
# Version: 1.0.1
# Author: Vinicius Mayrink [aut, cre], Joao Duarte [aut]
# Maintainer: Vinicius Mayrink <vdinizm@gmail.com>
# Depends: R (>= 3.1.0)
# Description: Set of tools to find coherent patterns in gene expression (microarray) data using a Bayesian Sparse Latent Factor Model (SLFM) <DOI:10.1007/978-3-319-12454-4_15>. Considerable effort has been put to build a fast and memory efficient package, which makes this proposal an interesting and computationally convenient alternative to study patterns of gene expressions exhibited in matrices. The package contains the implementation of two versions of the model based on different mixture priors for the loadings: one relies on a degenerate component at zero and the other uses a small variance normal distribution for the spike part of the mixture.
# Imports: Rcpp (>= 0.11.0), coda, lattice
# LinkingTo: Rcpp, RcppArmadillo
# Encoding: UTF-8
# License: GPL-2
# NeedsCompilation: yes
# RoxygenNote: 7.1.0
# Packaged: 2020-03-15 20:20:33 UTC; vinicius
# Repository: CRAN
# Date/Publication: 2020-03-15 22:20:02 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
