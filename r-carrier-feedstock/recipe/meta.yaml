{% set version = '0.1.1' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-carrier
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/carrier_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/carrier/carrier_{{ version }}.tar.gz
  sha256: 23f4a4ebfe532aa3057730ae36ec5e6bd2636c435bd391a159cb9bbd8ab2bf94

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip
  noarch: generic

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: covr, testthat (>= 3.0.0)
requirements:
  build:
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-lobstr
    - r-rlang >=1.0.1

  run:
    - r-base
    - r-lobstr
    - r-rlang >=1.0.1

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('carrier')"           # [not win]
    - "\"%R%\" -e \"library('carrier')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://github.com/r-lib/carrier
  license: MIT
  summary: Sending functions to remote processes can be wasteful of resources because they carry
    their environments with them. With the carrier package, it is easy to create functions
    that are isolated from their environment. These isolated functions, also called
    crates, print at the console with their total size and can be easily tested locally
    before being sent to a remote.
  license_family: MIT
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/MIT'
    - LICENSE

extra:
  recipe-maintainers:
    - katietz

# The original CRAN metadata for this package was:

# Package: carrier
# Title: Isolate Functions for Remote Execution
# Version: 0.1.1
# Authors@R: c( person("Lionel", "Henry", , "lionel@posit.co", role = c("aut", "cre")), person("Posit Software, PBC", role = c("cph", "fnd")) )
# Description: Sending functions to remote processes can be wasteful of resources because they carry their environments with them. With the carrier package, it is easy to create functions that are isolated from their environment. These isolated functions, also called crates, print at the console with their total size and can be easily tested locally before being sent to a remote.
# License: MIT + file LICENSE
# URL: https://github.com/r-lib/carrier
# BugReports: https://github.com/r-lib/carrier/issues
# Depends: R (>= 3.4.0)
# Imports: lobstr, rlang (>= 1.0.1)
# Suggests: covr, testthat (>= 3.0.0)
# ByteCompile: true
# Encoding: UTF-8
# RoxygenNote: 7.2.3
# Config/testthat/edition: 3
# NeedsCompilation: no
# Packaged: 2023-04-28 11:29:54 UTC; lionel
# Author: Lionel Henry [aut, cre], Posit Software, PBC [cph, fnd]
# Maintainer: Lionel Henry <lionel@posit.co>
# Repository: CRAN
# Date/Publication: 2023-04-28 15:10:02 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
