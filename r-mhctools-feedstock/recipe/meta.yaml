{% set version = '1.5.3' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-mhctools
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/MHCtools_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/MHCtools/MHCtools_{{ version }}.tar.gz
  sha256: ed51ec0c125b397965215e5bbed2ec751b25e9b02947bcb13645d3238ea98178

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip
  noarch: generic

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

requirements:
  build:
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-mgcv
    - r-openxlsx

  run:
    - r-base
    - r-mgcv
    - r-openxlsx

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('MHCtools')"           # [not win]
    - "\"%R%\" -e \"library('MHCtools')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://CRAN.R-project.org/package=MHCtools
  license: MIT
  summary: Fifteen tools for bioinformatics processing and analysis of major histocompatibility
    complex (MHC) data. The functions are tailored for amplicon data sets that have
    been filtered using the dada2 method (for more information on dada2, visit <https://benjjneb.github.io/dada2/>
    ), but even other types of data sets can be analyzed. The ReplMatch() function matches
    replicates in data sets in order to evaluate genotyping success. The GetReplTable()
    and GetReplStats() functions perform such an evaluation. The CreateFas() function
    creates a fasta file with all the sequences in the data set. The CreateSamplesFas()
    function creates individual fasta files for each sample in the data set. The DistCalc()
    function calculates Grantham, Sandberg, or p-distances from pairwise comparisons
    of all sequences in a data set, and mean distances of all pairwise comparisons within
    each sample in a data set. The function additionally outputs five tables with physico-chemical
    z-descriptor values (based on Sandberg et al. 1998) for each amino acid position
    in all sequences in the data set. These tables may be useful for further downstream
    analyses, such as estimation of MHC supertypes. The BootKmeans() function is a wrapper
    for the kmeans() function of the 'stats' package, which allows for bootstrapping.
    Bootstrapping k-estimates may be desirable in data sets, where e.g. BIC- vs. k-values
    do not produce clear inflection points ("elbows"). BootKmeans() performs multiple
    runs of kmeans() and estimates optimal k-values based on a user-defined threshold
    of BIC reduction. The method is an automated and bootstrapped version of visually
    inspecting elbow plots of BIC- vs. k-values. The ClusterMatch() function is a tool
    for evaluating whether different k-means() clustering models identify similar clusters,
    and summarize bootstrap model stats as means for different estimated values of k.
    It is designed to take files produced by the BootKmeans() function as input, but
    other data can be analysed if the descriptions of the required data formats are
    observed carefully. The PapaDiv() function compares parent pairs in the data set
    and calculate their joint MHC diversity, taking into account sequence variants that
    occur in both parents. The HpltFind() function infers putative haplotypes from families
    in the data set. The GetHpltTable() and GetHpltStats() functions evaluate the accuracy
    of the haplotype inference. The CreateHpltOccTable() function creates a binary (logical)
    haplotype-sequence occurrence matrix from the output of HpltFind(), for easy overview
    of which sequences are present in which haplotypes. The HpltMatch() function compares
    haplotypes to help identify overlapping and potentially identical types. The NestTablesXL()
    function translates the output from HpltFind() to an Excel workbook, that provides
    a convenient overview for evaluation and curating of the inferred putative haplotypes.
  license_family: MIT
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/MIT'
    - LICENSE

extra:
  recipe-maintainers:
    - katietz

# The original CRAN metadata for this package was:

# Package: MHCtools
# Type: Package
# Title: Analysis of MHC Data in Non-Model Species
# Version: 1.5.3
# Authors@R: person("Jacob", "Roved", email = "jacob.roved@biol.lu.se", role = c("aut", "cre"))
# Description: Fifteen tools for bioinformatics processing and analysis of major histocompatibility complex (MHC) data. The functions are tailored for amplicon data sets that have been filtered using the dada2 method (for more information on dada2, visit <https://benjjneb.github.io/dada2/> ), but even other types of data sets can be analyzed. The ReplMatch() function matches replicates in data sets in order to evaluate genotyping success. The GetReplTable() and GetReplStats() functions perform such an evaluation. The CreateFas() function creates a fasta file with all the sequences in the data set. The CreateSamplesFas() function creates individual fasta files for each sample in the data set. The DistCalc() function calculates Grantham, Sandberg, or p-distances from pairwise comparisons of all sequences in a data set, and mean distances of all pairwise comparisons within each sample in a data set. The function additionally outputs five tables with physico-chemical z-descriptor values (based on Sandberg et al. 1998) for each amino acid position in all sequences in the data set. These tables may be useful for further downstream analyses, such as estimation of MHC supertypes. The BootKmeans() function is a wrapper for the kmeans() function of the 'stats' package, which allows for bootstrapping. Bootstrapping k-estimates may be desirable in data sets, where e.g. BIC- vs. k-values do not produce clear inflection points ("elbows"). BootKmeans() performs multiple runs of kmeans() and estimates optimal k-values based on a user-defined threshold of BIC reduction. The method is an automated and bootstrapped version of visually inspecting elbow plots of BIC- vs. k-values. The ClusterMatch() function is a tool for evaluating whether different k-means() clustering models identify similar clusters, and summarize bootstrap model stats as means for different estimated values of k. It is designed to take files produced by the BootKmeans() function as input, but other data can be analysed if the descriptions of the required data formats are observed carefully. The PapaDiv() function compares parent pairs in the data set and calculate their joint MHC diversity, taking into account sequence variants that occur in both parents. The HpltFind() function infers putative haplotypes from families in the data set. The GetHpltTable() and GetHpltStats() functions evaluate the accuracy of the haplotype inference. The CreateHpltOccTable() function creates a binary (logical) haplotype-sequence occurrence matrix from the output of HpltFind(), for easy overview of which sequences are present in which haplotypes. The HpltMatch() function compares haplotypes to help identify overlapping and potentially identical types. The NestTablesXL() function translates the output from HpltFind() to an Excel workbook, that provides a convenient overview for evaluation and curating of the inferred putative haplotypes.
# License: MIT + file LICENSE
# Encoding: UTF-8
# LazyData: true
# Imports: stats, utils, mgcv, grDevices, graphics, openxlsx
# RoxygenNote: 7.2.3
# NeedsCompilation: no
# Packaged: 2023-07-08 12:57:30 UTC; jacobroved
# Author: Jacob Roved [aut, cre]
# Maintainer: Jacob Roved <jacob.roved@biol.lu.se>
# Depends: R (>= 3.5.0)
# Repository: CRAN
# Date/Publication: 2023-07-08 13:10:02 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
