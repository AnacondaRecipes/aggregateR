{% set version = '1.0-9' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-optimization
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/optimization_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/optimization/optimization_{{ version }}.tar.gz
  sha256: a8aa6b639a8f6e063fec4d70682709675b5f5bc823c8a7dc25105408d151e9dd

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: R.rsp
requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{ compiler('cxx') }}            # [not win]
    - {{ compiler('m2w64_cxx') }}      # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}make
    - {{ posix }}sed               # [win]
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-rcpp >=0.12.12
    - r-colorspace

  run:
    - r-base
    - {{native}}gcc-libs         # [win]
    - r-rcpp >=0.12.12
    - r-colorspace

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('optimization')"           # [not win]
    - "\"%R%\" -e \"library('optimization')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://github.com/kaihusmann/optimization
  license: GPL-2
  summary: Flexible optimizer with numerous input specifications for detailed parameterisation.
    Designed for complex loss functions with state and parameter space constraints.
    Visualization tools for validation and analysis of the convergence are included.
  license_family: GPL2
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-2'

extra:
  recipe-maintainers:
    - katietz

# The original CRAN metadata for this package was:

# Package: optimization
# Type: Package
# Title: Flexible Optimization of Complex Loss Functions with State and Parameter Space Constraints
# Version: 1.0-9
# Authors@R: c( person("Kai", "Husmann", role=c("aut", "cre"), email="kai.husmann@uni-goettingen.de"), person("Alexander", "Lange", role="aut"), person("Nordwestdeutsche Forstliche Versuchsanstalt (NW-FVA)", role=c("cph", "fnd")))
# Description: Flexible optimizer with numerous input specifications for detailed parameterisation. Designed for complex loss functions with state and parameter space constraints. Visualization tools for validation and analysis of the convergence are included.
# License: GPL (>= 2)
# Depends: R (>= 3.2.0), Rcpp (>= 0.12.12)
# Imports: colorspace
# LinkingTo: Rcpp
# RoxygenNote: 7.1.1
# Suggests: R.rsp
# VignetteBuilder: R.rsp
# URL: https://github.com/kaihusmann/optimization
# BugReports: https://github.com/kaihusmann/optimization/issues
# Encoding: UTF-8
# NeedsCompilation: yes
# Packaged: 2022-02-15 12:44:19 UTC; khusman1
# Author: Kai Husmann [aut, cre], Alexander Lange [aut], Nordwestdeutsche Forstliche Versuchsanstalt (NW-FVA) [cph, fnd]
# Maintainer: Kai Husmann <kai.husmann@uni-goettingen.de>
# Repository: CRAN
# Date/Publication: 2022-02-15 14:00:02 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
