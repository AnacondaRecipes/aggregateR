{% set version = '2.5.0' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-rsvg
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/rsvg_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/rsvg/rsvg_{{ version }}.tar.gz
  sha256: b5ddafaefe0ab8f4cb5305dcbc8a9cbafaa5210c2c51cc28480a21a2210c23be

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: ggplot2, knitr, magick, rmarkdown, spelling, svglite, webp
requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}sed               # [win]
    - {{ posix }}grep              # [win]
    - {{ posix }}autoconf
    - {{ posix }}automake          # [not win]
    - {{ posix }}automake-wrapper  # [win]
    - {{ posix }}pkg-config
    - {{ posix }}make
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - librsvg

  run:
    - r-base
    - {{native}}gcc-libs         # [win]
    - librsvg

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('rsvg')"           # [not win]
    - "\"%R%\" -e \"library('rsvg')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://docs.ropensci.org/rsvg/, https://github.com/ropensci/rsvg
  license: MIT
  summary: Renders vector-based svg images into high-quality custom-size bitmap arrays using
    'librsvg2'. The resulting bitmap can be written to e.g. png, jpeg or webp format.
    In addition, the package can convert images directly to various formats such as
    pdf or postscript.
  license_family: MIT
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/MIT'
    - LICENSE

extra:
  recipe-maintainers:
    - katietz

# The original CRAN metadata for this package was:

# Type: Package
# Package: rsvg
# Title: Render SVG Images into PDF, PNG, (Encapsulated) PostScript, or Bitmap Arrays
# Version: 2.5.0
# Authors@R: c( person("Jeroen", "Ooms", , "jeroen@berkeley.edu", role = c("aut", "cre"), comment = c(ORCID = "0000-0002-4035-0289")), person("Salim", "Bruggemann", , "salim-b@pm.me", role = c("ctb"), comment = c(ORCID = "0000-0002-5329-5987")))
# Description: Renders vector-based svg images into high-quality custom-size bitmap arrays using 'librsvg2'. The resulting bitmap can be written to e.g. png, jpeg or webp format. In addition, the package can convert images directly to various formats such as pdf or postscript.
# License: MIT + file LICENSE
# URL: https://docs.ropensci.org/rsvg/, https://github.com/ropensci/rsvg
# BugReports: https://github.com/ropensci/rsvg/issues
# Suggests: ggplot2, knitr, magick, rmarkdown, spelling, svglite, webp
# VignetteBuilder: knitr
# Encoding: UTF-8
# Language: en-US
# RoxygenNote: 7.1.2
# SystemRequirements: librsvg2
# NeedsCompilation: yes
# Packaged: 2023-09-25 17:13:27 UTC; jeroen
# Author: Jeroen Ooms [aut, cre] (<https://orcid.org/0000-0002-4035-0289>), Salim Bruggemann [ctb] (<https://orcid.org/0000-0002-5329-5987>)
# Maintainer: Jeroen Ooms <jeroen@berkeley.edu>
# Repository: CRAN
# Date/Publication: 2023-09-25 22:00:05 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
