{% set version = '0.9.96' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-conquestr
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/conquestr_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/conquestr/conquestr_{{ version }}.tar.gz
  sha256: 895d73bf11a07eed75a0d2bc368e0c49a70ba474a415c806e3ef9442075b18dc

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: knitr, rmarkdown, testthat (>= 3.0.0)
requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{ compiler('cxx') }}            # [not win]
    - {{ compiler('m2w64_cxx') }}      # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}make
    - {{ posix }}sed               # [win]
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-rcpp
    - r-dplyr
    - r-ggplot2 >=3.3.0
    - r-ggrepel
    - r-kableextra
    - r-magrittr
    - r-rlang
    - r-stringr
    - r-tidyr
    - r-tidyselect

  run:
    - r-base
    - {{native}}gcc-libs         # [win]
    - r-rcpp
    - r-dplyr
    - r-ggplot2 >=3.3.0
    - r-ggrepel
    - r-kableextra
    - r-magrittr
    - r-rlang
    - r-stringr
    - r-tidyr
    - r-tidyselect

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('conquestr')"           # [not win]
    - "\"%R%\" -e \"library('conquestr')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://www.acer.org/au/conquest, https://conquestmanual.acer.org, https://shop.acer.org/acer-conquest-5.html
  license: GPL-3
  summary: Extends 'ACER ConQuest' through a family of functions designed to improve graphical
    outputs and help with advanced analysis (e.g., differential item functioning).  Allows
    R users to call 'ACER ConQuest' from within R and read 'ACER ConQuest' System Files
    (generated by the command 'put').  Requires 'ACER ConQuest' version 5.19.5 or later.
    A demonstration version can be downloaded from <https://shop.acer.org/acer-conquest-5.html>.
  license_family: GPL3
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-3'

extra:
  recipe-maintainers:
    - katietz

# The original CRAN metadata for this package was:

# Type: Package
# Package: conquestr
# Title: An R Package to Extend 'ACER ConQuest'
# Version: 0.9.96
# Authors@R: c( person( given = "Dan", family = "Cloney", role = c("aut", "cre"), email = "dan.cloney@acer.org", comment = c(ORCID = "0000-0002-2130-237X") ), person( given = "Ray", family = "Adams", role = c("aut"), email = "ray.adams@acer.org" ) )
# Description: Extends 'ACER ConQuest' through a family of functions designed to improve graphical outputs and help with advanced analysis (e.g., differential item functioning).  Allows R users to call 'ACER ConQuest' from within R and read 'ACER ConQuest' System Files (generated by the command 'put').  Requires 'ACER ConQuest' version 5.19.5 or later. A demonstration version can be downloaded from <https://shop.acer.org/acer-conquest-5.html>.
# License: GPL-3
# URL: https://www.acer.org/au/conquest, https://conquestmanual.acer.org, https://shop.acer.org/acer-conquest-5.html
# Imports: dplyr, ggplot2 (>= 3.3.0), ggrepel, kableExtra, magrittr, methods, Rcpp, rlang, stats, stringr, tidyr, tidyselect
# Suggests: knitr, rmarkdown, testthat (>= 3.0.0)
# LinkingTo: Rcpp
# VignetteBuilder: knitr
# Config/testthat/edition: 3
# Encoding: UTF-8
# RoxygenNote: 7.1.2
# SystemRequirements: ACER ConQuest (>=5.19.5)
# Collate: 'RcppExports.R' 'ReadConQuestLibrary.R' 'ReadConQuestRout_createDF.R' 'ReadConQuestState.R' 'ReadConQuestState_createDF.R' 'conquestr.R' 'conquestrFunc.R' 'generateHelpers.R' 'infoHelpers.R' 'itanalHelpers.R' 'plotGeneral.R' 'plotRout.R' 'pvHelpers.R' 'residHelpers.R' 'thrstThrsh.R' 'cleaningHelpers.R'
# NeedsCompilation: yes
# Packaged: 2022-04-01 10:21:36 UTC; dscloney
# Author: Dan Cloney [aut, cre] (<https://orcid.org/0000-0002-2130-237X>), Ray Adams [aut]
# Maintainer: Dan Cloney <dan.cloney@acer.org>
# Repository: CRAN
# Date/Publication: 2022-04-01 10:50:02 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
