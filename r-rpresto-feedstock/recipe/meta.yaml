{% set version = '1.4.5' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-rpresto
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/RPresto_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/RPresto/RPresto_{{ version }}.tar.gz
  sha256: 5a5da2519d98dcf0af6bd772605108241e366f6e551a9de814ce8dc3ea9ac5f9

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip
  noarch: generic

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: testthat, hms, knitr, rmarkdown
requirements:
  build:
    - {{ posix }}zip               # [win]

  host:
    - r-base
    - r-dbi >=0.3.0
    - r-bit64
    - r-dbplyr >=2.0.0
    - r-dplyr >=0.7.0
    - r-httr >=0.6
    - r-jsonlite
    - r-lifecycle
    - r-lubridate
    - r-openssl
    - r-progress
    - r-purrr
    - r-rlang
    - r-stringi
    - r-tibble

  run:
    - r-base
    - r-dbi >=0.3.0
    - r-bit64
    - r-dbplyr >=2.0.0
    - r-dplyr >=0.7.0
    - r-httr >=0.6
    - r-jsonlite
    - r-lifecycle
    - r-lubridate
    - r-openssl
    - r-progress
    - r-purrr
    - r-rlang
    - r-stringi
    - r-tibble

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('RPresto')"           # [not win]
    - "\"%R%\" -e \"library('RPresto')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://github.com/prestodb/RPresto
  license: BSD_3_clause
  summary: 'Implements a ''DBI'' compliant interface to Presto. Presto is an open source distributed
    SQL query engine for running interactive analytic queries against data sources of
    all sizes ranging from gigabytes to petabytes: <https://prestodb.io/>.'
  license_family: BSD
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/BSD_3_clause'
    - LICENSE

extra:
  recipe-maintainers:
    - katietz

# The original CRAN metadata for this package was:

# Package: RPresto
# Title: DBI Connector to Presto
# Version: 1.4.5
# Authors@R: c( person('Onur Ismail', 'Filiz', , 'onur@fb.com', role='aut'), person('Sergey', 'Goder', , 'sgoder@fb.com', role='aut'), person('Jarod G.R.', 'Meng', , 'jarodm@fb.com', role=c('aut', 'cre')), person('Thomas J.', 'Leeper', , 'thomasleeper@fb.com', role='ctb'), person('John Myles', 'White', , 'johnmyleswhite@fb.com', role='ctb') )
# Copyright: Meta Platforms, Inc. 2015-present.
# Description: Implements a 'DBI' compliant interface to Presto. Presto is an open source distributed SQL query engine for running interactive analytic queries against data sources of all sizes ranging from gigabytes to petabytes: <https://prestodb.io/>.
# Depends: R (>= 3.1.0), methods
# Imports: DBI (>= 0.3.0), httr (>= 0.6), openssl, jsonlite, stringi, stats, utils, purrr, dplyr (>= 0.7.0), dbplyr (>= 2.0.0), tibble, bit64, rlang, lifecycle, lubridate, progress
# Suggests: testthat, hms, knitr, rmarkdown
# License: BSD_3_clause + file LICENSE
# URL: https://github.com/prestodb/RPresto
# BugReports: https://github.com/prestodb/RPresto/issues
# Encoding: UTF-8
# Collate: 'PrestoDriver.R' 'Presto.R' 'PrestoSession.R' 'PrestoConnection.R' 'PrestoQuery.R' 'PrestoResult.R' 'RPresto-package.R' 'chunk.R' 'create.dummy.tables.R' 'cte.R' 'dbAppendTable.R' 'dbClearResult.R' 'dbConnect.R' 'dbCreateTable.R' 'dbCreateTableAs.R' 'dbDataType.R' 'dbDisconnect.R' 'dbExistsTable.R' 'dbFetch.R' 'dbGetInfo.R' 'dbGetQuery.R' 'dbGetRowCount.R' 'dbGetRowsAffected.R' 'dbGetStatement.R' 'dbHasCompleted.R' 'dbIsValid.R' 'dbListFields.R' 'dbListTables.R' 'dbQuoteIdentifier.R' 'dbQuoteLiteral.R' 'dbReadTable.R' 'dbRemoveTable.R' 'dbRenameTable.R' 'dbSendQuery.R' 'dbUnloadDriver.R' 'dbWriteTable.R' 'dbplyr-db.R' 'dbplyr-sql.R' 'dbplyr-src.R' 'default.R' 'fetch.R' 'presto.field.R' 'presto.field_utilities.R' 'request_headers.R' 'sqlCreateTable.R' 'sqlCreateTableAs.R' 'zzz.R'
# RoxygenNote: 7.2.3
# VignetteBuilder: knitr
# NeedsCompilation: no
# Packaged: 2023-05-05 03:32:23 UTC; jarodm
# Author: Onur Ismail Filiz [aut], Sergey Goder [aut], Jarod G.R. Meng [aut, cre], Thomas J. Leeper [ctb], John Myles White [ctb]
# Maintainer: Jarod G.R. Meng <jarodm@fb.com>
# Repository: CRAN
# Date/Publication: 2023-05-05 08:20:19 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
